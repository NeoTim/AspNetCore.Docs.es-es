---
title: Convenciones de aplicación y de ruta de Razor Pages en ASP.NET Core
author: rick-anderson
description: Vea cómo las convenciones de proveedor de modelos de aplicación y de ruta sirven para controlar el enrutamiento, la detección y el procesamiento de páginas.
monikerRange: '>= aspnetcore-2.1'
ms.author: riande
ms.custom: mvc
ms.date: 02/07/2020
no-loc:
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: razor-pages/razor-pages-conventions
ms.openlocfilehash: 308ca4401289a55e5dba8d61de50644cb2a53433
ms.sourcegitcommit: d65a027e78bf0b83727f975235a18863e685d902
ms.contentlocale: es-ES
ms.lasthandoff: 06/26/2020
ms.locfileid: "85405255"
---
# <a name="razor-pages-route-and-app-conventions-in-aspnet-core"></a><span data-ttu-id="767e0-103">Convenciones de aplicación y de ruta de Razor Pages en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="767e0-103">Razor Pages route and app conventions in ASP.NET Core</span></span>

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="767e0-104">Aquí encontrará información para saber cómo usar las [convenciones de proveedor de modelos de aplicación y de ruta](xref:mvc/controllers/application-model#conventions) con objeto de controlar el enrutamiento, la detección y el procesamiento en aplicaciones de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-104">Learn how to use page [route and app model provider conventions](xref:mvc/controllers/application-model#conventions) to control page routing, discovery, and processing in Razor Pages apps.</span></span>

<span data-ttu-id="767e0-105">Si necesita configurar rutas de una página personalizadas para páginas concretas, configure el enrutamiento a esas páginas con la [convención AddPageRoute](#configure-a-page-route), descrita más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="767e0-105">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="767e0-106">Para especificar una ruta de página, agregar segmentos de ruta o agregar parámetros a una ruta, use la directiva de página `@page`.</span><span class="sxs-lookup"><span data-stu-id="767e0-106">To specify a page route, add route segments, or add parameters to a route, use the page's `@page` directive.</span></span> <span data-ttu-id="767e0-107">Para obtener más información, consulte [Rutas personalizadas](xref:razor-pages/index#custom-routes).</span><span class="sxs-lookup"><span data-stu-id="767e0-107">For more information, see [Custom routes](xref:razor-pages/index#custom-routes).</span></span>

<span data-ttu-id="767e0-108">Hay ciertas palabras reservadas que no se pueden usar como segmentos de ruta o nombres de parámetro.</span><span class="sxs-lookup"><span data-stu-id="767e0-108">There are reserved words that can't be used as route segments or parameter names.</span></span> <span data-ttu-id="767e0-109">Para obtener más información, vea [Enrutamiento: Nombres de enrutamientos reservados](xref:mvc/controllers/routing#reserved-routing-names).</span><span class="sxs-lookup"><span data-stu-id="767e0-109">For more information, see [Routing: Reserved routing names](xref:mvc/controllers/routing#reserved-routing-names).</span></span>

<span data-ttu-id="767e0-110">[Vea o descargue el código de ejemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([cómo descargarlo](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="767e0-110">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

| <span data-ttu-id="767e0-111">Escenario</span><span class="sxs-lookup"><span data-stu-id="767e0-111">Scenario</span></span> | <span data-ttu-id="767e0-112">El ejemplo explica cómo...</span><span class="sxs-lookup"><span data-stu-id="767e0-112">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="767e0-113">Convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="767e0-113">Model conventions</span></span>](#model-conventions)<br><br><span data-ttu-id="767e0-114">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="767e0-114">Conventions.Add</span></span><ul><li><span data-ttu-id="767e0-115">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-115">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-116">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-116">IPageApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-117">IPageHandlerModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-117">IPageHandlerModelConvention</span></span></li></ul> | <span data-ttu-id="767e0-118">Agregar un encabezado y una plantilla de ruta a las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-118">Add a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="767e0-119">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-119">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="767e0-120">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-120">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-121">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-121">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-122">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="767e0-122">AddPageRoute</span></span></li></ul> | <span data-ttu-id="767e0-123">Agregar una plantilla de ruta a las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="767e0-123">Add a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="767e0-124">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="767e0-124">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="767e0-125">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-125">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-126">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-126">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-127">ConfigureFilter (clase de filtro, expresión lambda o fábrica de filtros)</span><span class="sxs-lookup"><span data-stu-id="767e0-127">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="767e0-128">Agregar un encabezado a las páginas de una carpeta, agregar un encabezado a una sola página y configurar una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory) para agregar un encabezado a las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-128">Add a header to pages in a folder, add a header to a single page, and configure a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |

<span data-ttu-id="767e0-129">Las convenciones de Razor Pages se agregan y configuran a través del método de extensión <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> a <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> en la colección de servicios de la clase `Startup`.</span><span class="sxs-lookup"><span data-stu-id="767e0-129">Razor Pages conventions are added and configured using the <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> extension method to <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> on the service collection in the `Startup` class.</span></span> <span data-ttu-id="767e0-130">Más avanzado el tema veremos los siguientes ejemplos de convención:</span><span class="sxs-lookup"><span data-stu-id="767e0-130">The following convention examples are explained later in this topic:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddRazorPages()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add( ... );
            options.Conventions.AddFolderRouteModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageRouteModelConvention(
                "/About", model => { ... });
            options.Conventions.AddPageRoute(
                "/Contact", "TheContactPage/{text?}");
            options.Conventions.AddFolderApplicationModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageApplicationModelConvention(
                "/About", model => { ... });
            options.Conventions.ConfigureFilter(model => { ... });
            options.Conventions.ConfigureFilter( ... );
        });
}
```

## <a name="route-order"></a><span data-ttu-id="767e0-131">Ordenación de la ruta</span><span class="sxs-lookup"><span data-stu-id="767e0-131">Route order</span></span>

<span data-ttu-id="767e0-132">Las rutas especifican un <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> para su procesamiento (una coincidencia de rutas).</span><span class="sxs-lookup"><span data-stu-id="767e0-132">Routes specify an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> for processing (route matching).</span></span>

| <span data-ttu-id="767e0-133">Ordenar</span><span class="sxs-lookup"><span data-stu-id="767e0-133">Order</span></span>            | <span data-ttu-id="767e0-134">Comportamiento</span><span class="sxs-lookup"><span data-stu-id="767e0-134">Behavior</span></span> |
| :--------------: | -------- |
| <span data-ttu-id="767e0-135">-1</span><span class="sxs-lookup"><span data-stu-id="767e0-135">-1</span></span>               | <span data-ttu-id="767e0-136">La ruta se procesa antes de que se procesen otras rutas.</span><span class="sxs-lookup"><span data-stu-id="767e0-136">The route is processed before other routes are processed.</span></span> |
| <span data-ttu-id="767e0-137">0</span><span class="sxs-lookup"><span data-stu-id="767e0-137">0</span></span>                | <span data-ttu-id="767e0-138">No se ha especificado ningún orden (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="767e0-138">Order isn't specified (default value).</span></span> <span data-ttu-id="767e0-139">Si no se asigna un valor `Order` (`Order = null`), el valor `Order` predeterminado de la ruta para su procesamiento es 0 (cero).</span><span class="sxs-lookup"><span data-stu-id="767e0-139">Not assigning `Order` (`Order = null`) defaults the route `Order` to 0 (zero) for processing.</span></span> |
| <span data-ttu-id="767e0-140">1, 2, &hellip; n</span><span class="sxs-lookup"><span data-stu-id="767e0-140">1, 2, &hellip; n</span></span> | <span data-ttu-id="767e0-141">Especifica el orden de procesamiento de la ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-141">Specifies the route processing order.</span></span> |

<span data-ttu-id="767e0-142">El procesamiento de rutas se establece por convención:</span><span class="sxs-lookup"><span data-stu-id="767e0-142">Route processing is established by convention:</span></span>

* <span data-ttu-id="767e0-143">Las rutas se procesan en orden secuencial (-1, 0, 1, 2&hellip; n).</span><span class="sxs-lookup"><span data-stu-id="767e0-143">Routes are processed in sequential order (-1, 0, 1, 2, &hellip; n).</span></span>
* <span data-ttu-id="767e0-144">Cuando las rutas tienen el mismo orden (`Order`), primero se asigna la ruta más específica y, después, las rutas menos específicas.</span><span class="sxs-lookup"><span data-stu-id="767e0-144">When routes have the same `Order`, the most specific route is matched first followed by less specific routes.</span></span>
* <span data-ttu-id="767e0-145">Cuando varias rutas con el mismo orden (`Order`) y el mismo número de parámetros coinciden con una URL de solicitud, se procesan en el orden en que se han agregado a la clase <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span><span class="sxs-lookup"><span data-stu-id="767e0-145">When routes with the same `Order` and the same number of parameters match a request URL, routes are processed in the order that they're added to the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span></span>

<span data-ttu-id="767e0-146">Si es posible, evite depender de un orden de procesamiento de rutas establecido.</span><span class="sxs-lookup"><span data-stu-id="767e0-146">If possible, avoid depending on an established route processing order.</span></span> <span data-ttu-id="767e0-147">Por lo general, el enrutamiento selecciona la ruta correcta con la coincidencia de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="767e0-147">Generally, routing selects the correct route with URL matching.</span></span> <span data-ttu-id="767e0-148">Si tiene que establecer propiedades de orden (`Order`) de las rutas para enrutar las solicitudes correctamente, es probable que el esquema de enrutamiento de la aplicación resulte confuso para los clientes y cueste mantenerlo.</span><span class="sxs-lookup"><span data-stu-id="767e0-148">If you must set route `Order` properties to route requests correctly, the app's routing scheme is probably confusing to clients and fragile to maintain.</span></span> <span data-ttu-id="767e0-149">Trate de simplificar el esquema de enrutamiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-149">Seek to simplify the app's routing scheme.</span></span> <span data-ttu-id="767e0-150">La aplicación de ejemplo requiere un orden de procesamiento de rutas explícito para mostrar varios escenarios de enrutamiento con una sola aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-150">The sample app requires an explicit route processing order to demonstrate several routing scenarios using a single app.</span></span> <span data-ttu-id="767e0-151">Sin embargo, intente evitar configurar un orden (`Order`) de enrutamiento en aplicaciones de producción.</span><span class="sxs-lookup"><span data-stu-id="767e0-151">However, you should attempt to avoid the practice of setting route `Order` in production apps.</span></span>

<span data-ttu-id="767e0-152">El enrutamiento de Razor Pages y el del controlador MVC comparten una implementación.</span><span class="sxs-lookup"><span data-stu-id="767e0-152">Razor Pages routing and MVC controller routing share an implementation.</span></span> <span data-ttu-id="767e0-153">Puede encontrar más información sobre el orden de las rutas y MVC en el artículo [Enrutamiento a acciones de controlador: Ordenación de rutas de atributo](xref:mvc/controllers/routing#ordering-attribute-routes).</span><span class="sxs-lookup"><span data-stu-id="767e0-153">Information on route order in the MVC topics is available at [Routing to controller actions: Ordering attribute routes](xref:mvc/controllers/routing#ordering-attribute-routes).</span></span>

## <a name="model-conventions"></a><span data-ttu-id="767e0-154">Convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="767e0-154">Model conventions</span></span>

<span data-ttu-id="767e0-155">Agregue un delegado de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> con el fin de agregar [convenciones de modelo](xref:mvc/controllers/application-model#conventions) que se apliquen a Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-155">Add a delegate for <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> to add [model conventions](xref:mvc/controllers/application-model#conventions) that apply to Razor Pages.</span></span>

### <a name="add-a-route-model-convention-to-all-pages"></a><span data-ttu-id="767e0-156">Adición de una convención de modelo de ruta a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-156">Add a route model convention to all pages</span></span>

<span data-ttu-id="767e0-157">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de ruta de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-157">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page route model construction.</span></span>

<span data-ttu-id="767e0-158">En la aplicación de ejemplo se agrega una plantilla de ruta `{globalTemplate?}` a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-158">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-159">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `1`.</span><span class="sxs-lookup"><span data-stu-id="767e0-159">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `1`.</span></span> <span data-ttu-id="767e0-160">Esto garantiza el siguiente comportamiento de coincidencia de rutas en la aplicación de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="767e0-160">This ensures the following route matching behavior in the sample app:</span></span>

* <span data-ttu-id="767e0-161">Más adelante en este mismo tema se incluye una plantilla de ruta para `TheContactPage/{text?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-161">A route template for `TheContactPage/{text?}` is added later in the topic.</span></span> <span data-ttu-id="767e0-162">La ruta de la página Contact tiene un orden predeterminado de `null` (`Order = 0`), por lo que coincide antes de la plantilla de ruta `{globalTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-162">The Contact Page route has a default order of `null` (`Order = 0`), so it matches before the `{globalTemplate?}` route template.</span></span>
* <span data-ttu-id="767e0-163">Más adelante en este mismo tema se incluye una plantilla de ruta `{aboutTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-163">An `{aboutTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="767e0-164">La plantilla `{aboutTemplate?}` tiene un `Order` con un valor de `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-164">The `{aboutTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="767e0-165">Cuando la página About se solicita en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no `RouteData.Values["aboutTemplate"]` (`Order = 2`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-165">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>
* <span data-ttu-id="767e0-166">Más adelante en este mismo tema se incluye una plantilla de ruta `{otherPagesTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-166">An `{otherPagesTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="767e0-167">La plantilla `{otherPagesTemplate?}` tiene un `Order` con un valor de `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-167">The `{otherPagesTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="767e0-168">Cuando se solicita una página de la carpeta *Pages/OtherPages* con un parámetro de ruta (por ejemplo, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-168">When any page in the *Pages/OtherPages* folder is requested with a route parameter (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-169">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-169">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-170">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-170">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-171">Las opciones de Razor Pages (por ejemplo, agregar <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>) se agregan cuando se incluye MVC en la colección de servicios de `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="767e0-171">Razor Pages options, such as adding <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, are added when MVC is added to the service collection in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="767e0-172">Para obtener un ejemplo, vea la [aplicación de ejemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span><span class="sxs-lookup"><span data-stu-id="767e0-172">For an example, see the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet1)]

<span data-ttu-id="767e0-173">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-173">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![La página About se solicita con un segmento de ruta de GlobalRouteValue.](razor-pages-conventions/_static/about-page-global-template.png)

### <a name="add-an-app-model-convention-to-all-pages"></a><span data-ttu-id="767e0-176">Adición de una convención de modelo de aplicación a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-176">Add an app model convention to all pages</span></span>

<span data-ttu-id="767e0-177">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de aplicación de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-177">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page app model construction.</span></span>

<span data-ttu-id="767e0-178">Para demostrar esta y otras convenciones más adelante en este tema, la aplicación de ejemplo incluye una clase `AddHeaderAttribute`.</span><span class="sxs-lookup"><span data-stu-id="767e0-178">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="767e0-179">El constructor de esta clase acepta una cadena `name` y una matriz de cadenas `values`.</span><span class="sxs-lookup"><span data-stu-id="767e0-179">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="767e0-180">Estos valores se usan en su método `OnResultExecuting` para establecer un encabezado de respuesta.</span><span class="sxs-lookup"><span data-stu-id="767e0-180">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="767e0-181">La clase completa se muestra en la sección [Convenciones de acción del modelo de página](#page-model-action-conventions) más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="767e0-181">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="767e0-182">En la aplicación de ejemplo se usa la clase `AddHeaderAttribute` para agregar un encabezado (`GlobalHeader`) a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-182">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-183">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-183">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet2)]

<span data-ttu-id="767e0-184">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-184">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que GlobalHeader se ha agregado.](razor-pages-conventions/_static/about-page-global-header.png)

### <a name="add-a-handler-model-convention-to-all-pages"></a><span data-ttu-id="767e0-186">Adición de una convención de modelo de controlador a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-186">Add a handler model convention to all pages</span></span>

<span data-ttu-id="767e0-187">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de controlador de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-187">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page handler model construction.</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Conventions/GlobalPageHandlerModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-188">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-188">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet10)]

## <a name="page-route-action-conventions"></a><span data-ttu-id="767e0-189">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-189">Page route action conventions</span></span>

<span data-ttu-id="767e0-190">El proveedor de modelos de ruta predeterminado que se deriva de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invoca convenciones diseñadas para proporcionar puntos de extensibilidad que permitan configurar rutas de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-190">The default route model provider that derives from <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

### <a name="folder-route-model-convention"></a><span data-ttu-id="767e0-191">Convención de modelo de ruta de carpeta</span><span class="sxs-lookup"><span data-stu-id="767e0-191">Folder route model convention</span></span>

<span data-ttu-id="767e0-192">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> para todas las páginas de la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-192">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for all of the pages under the specified folder.</span></span>

<span data-ttu-id="767e0-193">En la aplicación de ejemplo se usa <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> para agregar una plantilla de ruta `{otherPagesTemplate?}` a las páginas de la carpeta *OtherPages*:</span><span class="sxs-lookup"><span data-stu-id="767e0-193">The sample app uses <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet3)]

<span data-ttu-id="767e0-194">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-194">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="767e0-195">Esto garantiza que la plantilla `{globalTemplate?}` (establecida en `1` anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-195">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="767e0-196">Si se solicita una página de la carpeta *Pages/OtherPages* con un valor de parámetro de ruta (por ejemplo, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-196">If a page in the *Pages/OtherPages* folder is requested with a route parameter value (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-197">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-197">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-198">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-198">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-199">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-199">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Page1 en la carpeta OtherPages solicitada con un segmento de ruta de GlobalRouteValue y OtherPagesRouteValue](razor-pages-conventions/_static/otherpages-page1-global-and-otherpages-templates.png)

### <a name="page-route-model-convention"></a><span data-ttu-id="767e0-202">Convención de modelo de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-202">Page route model convention</span></span>

<span data-ttu-id="767e0-203">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> para la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="767e0-203">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for the page with the specified name.</span></span>

<span data-ttu-id="767e0-204">En la aplicación de ejemplo se usa `AddPageRouteModelConvention` para agregar una plantilla de ruta `{aboutTemplate?}` a la página About:</span><span class="sxs-lookup"><span data-stu-id="767e0-204">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet4)]

<span data-ttu-id="767e0-205">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-205">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="767e0-206">Esto garantiza que la plantilla `{globalTemplate?}` (establecida en `1` anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-206">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="767e0-207">Si se solicita la página About con un valor de parámetro de ruta en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["aboutTemplate"]` (`Order = 2`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-207">If the About page is requested with a route parameter value at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-208">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-208">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-209">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-209">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-210">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue/AboutRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-210">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![La página About se solicita con los segmentos de ruta de GlobalRouteValue y AboutRouteValue.](razor-pages-conventions/_static/about-page-global-and-about-templates.png)

## <a name="use-a-parameter-transformer-to-customize-page-routes"></a><span data-ttu-id="767e0-213">Uso de transformadores de parámetros para personalizar rutas de página</span><span class="sxs-lookup"><span data-stu-id="767e0-213">Use a parameter transformer to customize page routes</span></span>

<span data-ttu-id="767e0-214">Las rutas de página generadas por ASP.NET Core se pueden personalizar mediante el uso de un transformador de parámetros.</span><span class="sxs-lookup"><span data-stu-id="767e0-214">Page routes generated by ASP.NET Core can be customized using a parameter transformer.</span></span> <span data-ttu-id="767e0-215">Un transformador de parámetro implementa `IOutboundParameterTransformer` y transforma el valor de parámetros.</span><span class="sxs-lookup"><span data-stu-id="767e0-215">A parameter transformer implements `IOutboundParameterTransformer` and transforms the value of parameters.</span></span> <span data-ttu-id="767e0-216">Por ejemplo, un transformador de parámetros `SlugifyParameterTransformer` personalizado cambia el valor de ruta `SubscriptionManagement` a `subscription-management`.</span><span class="sxs-lookup"><span data-stu-id="767e0-216">For example, a custom `SlugifyParameterTransformer` parameter transformer changes the `SubscriptionManagement` route value to `subscription-management`.</span></span>

<span data-ttu-id="767e0-217">La convención de modelo de ruta de página `PageRouteTransformerConvention` aplica un transformador de parámetros a los segmentos de nombre de archivo y carpeta de las rutas de página generadas automáticamente en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-217">The `PageRouteTransformerConvention` page route model convention applies a parameter transformer to the folder and file name segments of automatically generated page routes in an app.</span></span> <span data-ttu-id="767e0-218">Por ejemplo, para el archivo de Razor Pages en */Pages/SubscriptionManagement/ViewAll.cshtml*, su ruta cambiaría de `/SubscriptionManagement/ViewAll` a `/subscription-management/view-all`.</span><span class="sxs-lookup"><span data-stu-id="767e0-218">For example, the Razor Pages file at */Pages/SubscriptionManagement/ViewAll.cshtml* would have its route rewritten from `/SubscriptionManagement/ViewAll` to `/subscription-management/view-all`.</span></span>

<span data-ttu-id="767e0-219">`PageRouteTransformerConvention` solo transforma los segmentos de una ruta de página generados automáticamente que proceden de la carpeta y del archivo llamados Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-219">`PageRouteTransformerConvention` only transforms the automatically generated segments of a page route that come from the Razor Pages folder and file name.</span></span> <span data-ttu-id="767e0-220">No transforma segmentos de ruta agregados con la directiva `@page`.</span><span class="sxs-lookup"><span data-stu-id="767e0-220">It doesn't transform route segments added with the `@page` directive.</span></span> <span data-ttu-id="767e0-221">Esta convención tampoco transforma las rutas agregadas por <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*>.</span><span class="sxs-lookup"><span data-stu-id="767e0-221">The convention also doesn't transform routes added by <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*>.</span></span>

<span data-ttu-id="767e0-222">La convención `PageRouteTransformerConvention` está registrada como una opción en `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="767e0-222">The `PageRouteTransformerConvention` is registered as an option in `Startup.ConfigureServices`:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddRazorPages()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add(
                new PageRouteTransformerConvention(
                    new SlugifyParameterTransformer()));
        });
}
```

[!code-csharp[](~/mvc/controllers/routing/samples/3.x/main/StartupSlugifyParamTransformer.cs?name=snippet2)]

[!INCLUDE[](~/includes/regex.md)]

## <a name="configure-a-page-route"></a><span data-ttu-id="767e0-223">Configurar una ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-223">Configure a page route</span></span>

<span data-ttu-id="767e0-224">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> para configurar una ruta a una página en la ruta de acceso de página especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-224">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="767e0-225">Los vínculos generados que apuntan a esa página usan la ruta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-225">Generated links to the page use your specified route.</span></span> <span data-ttu-id="767e0-226">`AddPageRoute` usa `AddPageRouteModelConvention` para establecer la ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-226">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="767e0-227">En la aplicación de ejemplo se crea una ruta a `/TheContactPage` para *Contact.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="767e0-227">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet5)]

<span data-ttu-id="767e0-228">A la página Contact también se puede llegar en `/Contact` a través de su ruta predeterminada.</span><span class="sxs-lookup"><span data-stu-id="767e0-228">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="767e0-229">La ruta personalizada de la aplicación de ejemplo que lleva a la página Contact tiene cabida para un segmento de ruta `text` opcional (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="767e0-229">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="767e0-230">La página también incluye este segmento opcional en su directiva `@page` por si el usuario que la visita tiene acceso a la página en su ruta `/Contact`:</span><span class="sxs-lookup"><span data-stu-id="767e0-230">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[](razor-pages-conventions/samples/3.x/SampleApp/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="767e0-231">Observe que la dirección URL generada para el vínculo **Contact** en la página presentada refleja la ruta actualizada:</span><span class="sxs-lookup"><span data-stu-id="767e0-231">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Vínculo Contact de la aplicación de ejemplo en la barra de navegación](razor-pages-conventions/_static/contact-link.png)

![Si revisamos el vínculo Contact en el HTML presentado, vemos que href está establecido en "/TheContactPage".](razor-pages-conventions/_static/contact-link-source.png)

<span data-ttu-id="767e0-234">Visite la página Contact a través de su ruta normal, `/Contact`, o de la ruta personalizada, `/TheContactPage`.</span><span class="sxs-lookup"><span data-stu-id="767e0-234">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="767e0-235">Si se proporciona un segmento de ruta `text` adicional, la página muestra el segmento codificado en HTML que se ha proporcionado:</span><span class="sxs-lookup"><span data-stu-id="767e0-235">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Ejemplo del explorador Microsoft Edge en el que se proporciona un segmento de ruta opcional "text" de "TextValue" en la dirección URL](razor-pages-conventions/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="767e0-238">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="767e0-238">Page model action conventions</span></span>

<span data-ttu-id="767e0-239">El proveedor de modelos de página predeterminado que implementa <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invoca convenciones que están diseñadas para proporcionar puntos de extensibilidad que permitan configurar modelos de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-239">The default page model provider that implements <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="767e0-240">Estas convenciones son útiles al crear y modificar escenarios de detección y procesamiento de páginas.</span><span class="sxs-lookup"><span data-stu-id="767e0-240">These conventions are useful when building and modifying page discovery and processing scenarios.</span></span>

<span data-ttu-id="767e0-241">En los ejemplos de esta sección, la aplicación de ejemplo usa una clase `AddHeaderAttribute` (la cual es un atributo <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>) que aplica un encabezado de respuesta:</span><span class="sxs-lookup"><span data-stu-id="767e0-241">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, that applies a response header:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="767e0-242">Si empleamos convenciones, el ejemplo indica cómo aplicar el atributo a todas las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="767e0-242">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="767e0-243">**Convención de modelo de aplicación de carpeta**</span><span class="sxs-lookup"><span data-stu-id="767e0-243">**Folder app model convention**</span></span>

<span data-ttu-id="767e0-244">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> que invoca una acción en las instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> para todas las páginas de la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-244">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> instances for all pages under the specified folder.</span></span>

<span data-ttu-id="767e0-245">En el ejemplo se demuestra el uso de `AddFolderApplicationModelConvention` agregando un encabezado (`OtherPagesHeader`) a las páginas de la carpeta *OtherPages* de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-245">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet6)]

<span data-ttu-id="767e0-246">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-246">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página OtherPages/Page1 ponen de manifiesto que OtherPagesHeader se ha agregado.](razor-pages-conventions/_static/page1-otherpages-header.png)

<span data-ttu-id="767e0-248">**Convención de modelo de aplicación de página**</span><span class="sxs-lookup"><span data-stu-id="767e0-248">**Page app model convention**</span></span>

<span data-ttu-id="767e0-249">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> para la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="767e0-249">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> for the page with the specified name.</span></span>

<span data-ttu-id="767e0-250">En el ejemplo se demuestra el uso de `AddPageApplicationModelConvention` agregando un encabezado (`AboutHeader`) a la página About:</span><span class="sxs-lookup"><span data-stu-id="767e0-250">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet7)]

<span data-ttu-id="767e0-251">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-251">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que AboutHeader se ha agregado.](razor-pages-conventions/_static/about-page-about-header.png)

<span data-ttu-id="767e0-253">**Configurar un filtro**</span><span class="sxs-lookup"><span data-stu-id="767e0-253">**Configure a filter**</span></span>

<span data-ttu-id="767e0-254"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> permite configurar el filtro que se quiere aplicar.</span><span class="sxs-lookup"><span data-stu-id="767e0-254"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified filter to apply.</span></span> <span data-ttu-id="767e0-255">Se puede implementar una clase de filtro, pero en la aplicación de ejemplo se muestra cómo implementar un filtro en una expresión lambda, cosa que sucede en segundo plano como una fábrica que devuelve un filtro:</span><span class="sxs-lookup"><span data-stu-id="767e0-255">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet8)]

<span data-ttu-id="767e0-256">El modelo de páginas de aplicación se usa para comprobar la ruta de acceso relativa de los segmentos que conducen a la página Page2 en la carpeta *OtherPages*.</span><span class="sxs-lookup"><span data-stu-id="767e0-256">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="767e0-257">Si la condición se supera, se agrega un encabezado.</span><span class="sxs-lookup"><span data-stu-id="767e0-257">If the condition passes, a header is added.</span></span> <span data-ttu-id="767e0-258">Si no, se aplica `EmptyFilter`.</span><span class="sxs-lookup"><span data-stu-id="767e0-258">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="767e0-259">`EmptyFilter` es un [filtro de acciones](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="767e0-259">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="767e0-260">Razor Pages pasa por alto los filtros de acciones, por lo que `EmptyFilter` no funciona del modo previsto si la ruta de acceso no contiene `OtherPages/Page2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-260">Since Action filters are ignored by Razor Pages, the `EmptyFilter` has no effect as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="767e0-261">Solicite la página Page2 del ejemplo en `localhost:5000/OtherPages/Page2` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-261">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![OtherPagesPage2Header se agrega a la respuesta de Page2.](razor-pages-conventions/_static/page2-filter-header.png)

<span data-ttu-id="767e0-263">**Configurar una fábrica de filtros**</span><span class="sxs-lookup"><span data-stu-id="767e0-263">**Configure a filter factory**</span></span>

<span data-ttu-id="767e0-264"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configura la fábrica especificada para aplicar [filtros](xref:mvc/controllers/filters) a todas las instancias de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-264"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="767e0-265">En la aplicación de ejemplo se proporciona un ejemplo del uso de una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory), para lo cual se agrega un encabezado (`FilterFactoryHeader`) con dos valores a las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-265">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Startup.cs?name=snippet9)]

<span data-ttu-id="767e0-266">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-266">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/3.x/SampleApp/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="767e0-267">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-267">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que se han agregado dos encabezados FilterFactoryHeader.](razor-pages-conventions/_static/about-page-filter-factory-header.png)

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="767e0-269">Filtros de MVC y filtro de página (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="767e0-269">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="767e0-270">Razor Pages no tiene en cuenta los [filtros de acciones](xref:mvc/controllers/filters#action-filters) de MVC, porque Razor Pages usa métodos de control.</span><span class="sxs-lookup"><span data-stu-id="767e0-270">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="767e0-271">Otros tipos de filtros de MVC que tiene a su disposición son: filtros de [autorización](xref:mvc/controllers/filters#authorization-filters), de [excepciones](xref:mvc/controllers/filters#exception-filters), de [recursos](xref:mvc/controllers/filters#resource-filters) y de [resultados](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="767e0-271">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="767e0-272">Para más información, vea el tema [Filters](xref:mvc/controllers/filters) (Filtros).</span><span class="sxs-lookup"><span data-stu-id="767e0-272">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="767e0-273">El filtro de páginas (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) se aplica a Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-273">The Page filter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="767e0-274">Para obtener más información, vea [Métodos de filtrado de Razor Pages](xref:razor-pages/filter).</span><span class="sxs-lookup"><span data-stu-id="767e0-274">For more information, see [Filter methods for Razor Pages](xref:razor-pages/filter).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="767e0-275">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="767e0-275">Additional resources</span></span>

* <xref:security/authorization/razor-pages-authorization>
* <xref:mvc/controllers/areas#areas-with-razor-pages>

::: moniker-end

::: moniker range="= aspnetcore-2.2"

<span data-ttu-id="767e0-276">Aquí encontrará información para saber cómo usar las [convenciones de proveedor de modelos de aplicación y de ruta](xref:mvc/controllers/application-model#conventions) con objeto de controlar el enrutamiento, la detección y el procesamiento en aplicaciones de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-276">Learn how to use page [route and app model provider conventions](xref:mvc/controllers/application-model#conventions) to control page routing, discovery, and processing in Razor Pages apps.</span></span>

<span data-ttu-id="767e0-277">Si necesita configurar rutas de una página personalizadas para páginas concretas, configure el enrutamiento a esas páginas con la [convención AddPageRoute](#configure-a-page-route), descrita más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="767e0-277">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="767e0-278">Para especificar una ruta de página, agregar segmentos de ruta o agregar parámetros a una ruta, use la directiva de página `@page`.</span><span class="sxs-lookup"><span data-stu-id="767e0-278">To specify a page route, add route segments, or add parameters to a route, use the page's `@page` directive.</span></span> <span data-ttu-id="767e0-279">Para obtener más información, consulte [Rutas personalizadas](xref:razor-pages/index#custom-routes).</span><span class="sxs-lookup"><span data-stu-id="767e0-279">For more information, see [Custom routes](xref:razor-pages/index#custom-routes).</span></span>

<span data-ttu-id="767e0-280">Hay ciertas palabras reservadas que no se pueden usar como segmentos de ruta o nombres de parámetro.</span><span class="sxs-lookup"><span data-stu-id="767e0-280">There are reserved words that can't be used as route segments or parameter names.</span></span> <span data-ttu-id="767e0-281">Para obtener más información, vea [Enrutamiento: Nombres de enrutamientos reservados](xref:fundamentals/routing#reserved-routing-names).</span><span class="sxs-lookup"><span data-stu-id="767e0-281">For more information, see [Routing: Reserved routing names](xref:fundamentals/routing#reserved-routing-names).</span></span>

<span data-ttu-id="767e0-282">[Vea o descargue el código de ejemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([cómo descargarlo](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="767e0-282">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

| <span data-ttu-id="767e0-283">Escenario</span><span class="sxs-lookup"><span data-stu-id="767e0-283">Scenario</span></span> | <span data-ttu-id="767e0-284">El ejemplo explica cómo...</span><span class="sxs-lookup"><span data-stu-id="767e0-284">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="767e0-285">Convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="767e0-285">Model conventions</span></span>](#model-conventions)<br><br><span data-ttu-id="767e0-286">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="767e0-286">Conventions.Add</span></span><ul><li><span data-ttu-id="767e0-287">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-287">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-288">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-288">IPageApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-289">IPageHandlerModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-289">IPageHandlerModelConvention</span></span></li></ul> | <span data-ttu-id="767e0-290">Agregar un encabezado y una plantilla de ruta a las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-290">Add a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="767e0-291">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-291">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="767e0-292">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-292">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-293">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-293">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-294">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="767e0-294">AddPageRoute</span></span></li></ul> | <span data-ttu-id="767e0-295">Agregar una plantilla de ruta a las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="767e0-295">Add a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="767e0-296">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="767e0-296">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="767e0-297">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-297">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-298">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-298">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-299">ConfigureFilter (clase de filtro, expresión lambda o fábrica de filtros)</span><span class="sxs-lookup"><span data-stu-id="767e0-299">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="767e0-300">Agregar un encabezado a las páginas de una carpeta, agregar un encabezado a una sola página y configurar una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory) para agregar un encabezado a las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-300">Add a header to pages in a folder, add a header to a single page, and configure a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |

<span data-ttu-id="767e0-301">Las convenciones de Razor Pages se agregan y configuran a través del método de extensión <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> a <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> en la colección de servicios de la clase `Startup`.</span><span class="sxs-lookup"><span data-stu-id="767e0-301">Razor Pages conventions are added and configured using the <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> extension method to <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> on the service collection in the `Startup` class.</span></span> <span data-ttu-id="767e0-302">Más avanzado el tema veremos los siguientes ejemplos de convención:</span><span class="sxs-lookup"><span data-stu-id="767e0-302">The following convention examples are explained later in this topic:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add( ... );
            options.Conventions.AddFolderRouteModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageRouteModelConvention(
                "/About", model => { ... });
            options.Conventions.AddPageRoute(
                "/Contact", "TheContactPage/{text?}");
            options.Conventions.AddFolderApplicationModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageApplicationModelConvention(
                "/About", model => { ... });
            options.Conventions.ConfigureFilter(model => { ... });
            options.Conventions.ConfigureFilter( ... );
        });
}
```

## <a name="route-order"></a><span data-ttu-id="767e0-303">Ordenación de la ruta</span><span class="sxs-lookup"><span data-stu-id="767e0-303">Route order</span></span>

<span data-ttu-id="767e0-304">Las rutas especifican un <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> para su procesamiento (una coincidencia de rutas).</span><span class="sxs-lookup"><span data-stu-id="767e0-304">Routes specify an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> for processing (route matching).</span></span>

| <span data-ttu-id="767e0-305">Ordenar</span><span class="sxs-lookup"><span data-stu-id="767e0-305">Order</span></span>            | <span data-ttu-id="767e0-306">Comportamiento</span><span class="sxs-lookup"><span data-stu-id="767e0-306">Behavior</span></span> |
| :--------------: | -------- |
| <span data-ttu-id="767e0-307">-1</span><span class="sxs-lookup"><span data-stu-id="767e0-307">-1</span></span>               | <span data-ttu-id="767e0-308">La ruta se procesa antes de que se procesen otras rutas.</span><span class="sxs-lookup"><span data-stu-id="767e0-308">The route is processed before other routes are processed.</span></span> |
| <span data-ttu-id="767e0-309">0</span><span class="sxs-lookup"><span data-stu-id="767e0-309">0</span></span>                | <span data-ttu-id="767e0-310">No se ha especificado ningún orden (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="767e0-310">Order isn't specified (default value).</span></span> <span data-ttu-id="767e0-311">Si no se asigna un valor `Order` (`Order = null`), el valor `Order` predeterminado de la ruta para su procesamiento es 0 (cero).</span><span class="sxs-lookup"><span data-stu-id="767e0-311">Not assigning `Order` (`Order = null`) defaults the route `Order` to 0 (zero) for processing.</span></span> |
| <span data-ttu-id="767e0-312">1, 2, &hellip; n</span><span class="sxs-lookup"><span data-stu-id="767e0-312">1, 2, &hellip; n</span></span> | <span data-ttu-id="767e0-313">Especifica el orden de procesamiento de la ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-313">Specifies the route processing order.</span></span> |

<span data-ttu-id="767e0-314">El procesamiento de rutas se establece por convención:</span><span class="sxs-lookup"><span data-stu-id="767e0-314">Route processing is established by convention:</span></span>

* <span data-ttu-id="767e0-315">Las rutas se procesan en orden secuencial (-1, 0, 1, 2&hellip; n).</span><span class="sxs-lookup"><span data-stu-id="767e0-315">Routes are processed in sequential order (-1, 0, 1, 2, &hellip; n).</span></span>
* <span data-ttu-id="767e0-316">Cuando las rutas tienen el mismo orden (`Order`), primero se asigna la ruta más específica y, después, las rutas menos específicas.</span><span class="sxs-lookup"><span data-stu-id="767e0-316">When routes have the same `Order`, the most specific route is matched first followed by less specific routes.</span></span>
* <span data-ttu-id="767e0-317">Cuando varias rutas con el mismo orden (`Order`) y el mismo número de parámetros coinciden con una URL de solicitud, se procesan en el orden en que se han agregado a la clase <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span><span class="sxs-lookup"><span data-stu-id="767e0-317">When routes with the same `Order` and the same number of parameters match a request URL, routes are processed in the order that they're added to the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span></span>

<span data-ttu-id="767e0-318">Si es posible, evite depender de un orden de procesamiento de rutas establecido.</span><span class="sxs-lookup"><span data-stu-id="767e0-318">If possible, avoid depending on an established route processing order.</span></span> <span data-ttu-id="767e0-319">Por lo general, el enrutamiento selecciona la ruta correcta con la coincidencia de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="767e0-319">Generally, routing selects the correct route with URL matching.</span></span> <span data-ttu-id="767e0-320">Si tiene que establecer propiedades de orden (`Order`) de las rutas para enrutar las solicitudes correctamente, es probable que el esquema de enrutamiento de la aplicación resulte confuso para los clientes y cueste mantenerlo.</span><span class="sxs-lookup"><span data-stu-id="767e0-320">If you must set route `Order` properties to route requests correctly, the app's routing scheme is probably confusing to clients and fragile to maintain.</span></span> <span data-ttu-id="767e0-321">Trate de simplificar el esquema de enrutamiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-321">Seek to simplify the app's routing scheme.</span></span> <span data-ttu-id="767e0-322">La aplicación de ejemplo requiere un orden de procesamiento de rutas explícito para mostrar varios escenarios de enrutamiento con una sola aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-322">The sample app requires an explicit route processing order to demonstrate several routing scenarios using a single app.</span></span> <span data-ttu-id="767e0-323">Sin embargo, intente evitar configurar un orden (`Order`) de enrutamiento en aplicaciones de producción.</span><span class="sxs-lookup"><span data-stu-id="767e0-323">However, you should attempt to avoid the practice of setting route `Order` in production apps.</span></span>

<span data-ttu-id="767e0-324">El enrutamiento de Razor Pages y el del controlador MVC comparten una implementación.</span><span class="sxs-lookup"><span data-stu-id="767e0-324">Razor Pages routing and MVC controller routing share an implementation.</span></span> <span data-ttu-id="767e0-325">Puede encontrar más información sobre el orden de las rutas y MVC en el artículo [Enrutamiento a acciones de controlador: Ordenación de rutas de atributo](xref:mvc/controllers/routing#ordering-attribute-routes).</span><span class="sxs-lookup"><span data-stu-id="767e0-325">Information on route order in the MVC topics is available at [Routing to controller actions: Ordering attribute routes](xref:mvc/controllers/routing#ordering-attribute-routes).</span></span>

## <a name="model-conventions"></a><span data-ttu-id="767e0-326">Convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="767e0-326">Model conventions</span></span>

<span data-ttu-id="767e0-327">Agregue un delegado de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> con el fin de agregar [convenciones de modelo](xref:mvc/controllers/application-model#conventions) que se apliquen a Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-327">Add a delegate for <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> to add [model conventions](xref:mvc/controllers/application-model#conventions) that apply to Razor Pages.</span></span>

### <a name="add-a-route-model-convention-to-all-pages"></a><span data-ttu-id="767e0-328">Adición de una convención de modelo de ruta a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-328">Add a route model convention to all pages</span></span>

<span data-ttu-id="767e0-329">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de ruta de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-329">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page route model construction.</span></span>

<span data-ttu-id="767e0-330">En la aplicación de ejemplo se agrega una plantilla de ruta `{globalTemplate?}` a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-330">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-331">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `1`.</span><span class="sxs-lookup"><span data-stu-id="767e0-331">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `1`.</span></span> <span data-ttu-id="767e0-332">Esto garantiza el siguiente comportamiento de coincidencia de rutas en la aplicación de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="767e0-332">This ensures the following route matching behavior in the sample app:</span></span>

* <span data-ttu-id="767e0-333">Más adelante en este mismo tema se incluye una plantilla de ruta para `TheContactPage/{text?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-333">A route template for `TheContactPage/{text?}` is added later in the topic.</span></span> <span data-ttu-id="767e0-334">La ruta de la página Contact tiene un orden predeterminado de `null` (`Order = 0`), por lo que coincide antes de la plantilla de ruta `{globalTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-334">The Contact Page route has a default order of `null` (`Order = 0`), so it matches before the `{globalTemplate?}` route template.</span></span>
* <span data-ttu-id="767e0-335">Más adelante en este mismo tema se incluye una plantilla de ruta `{aboutTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-335">An `{aboutTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="767e0-336">La plantilla `{aboutTemplate?}` tiene un `Order` con un valor de `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-336">The `{aboutTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="767e0-337">Cuando la página About se solicita en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no `RouteData.Values["aboutTemplate"]` (`Order = 2`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-337">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>
* <span data-ttu-id="767e0-338">Más adelante en este mismo tema se incluye una plantilla de ruta `{otherPagesTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-338">An `{otherPagesTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="767e0-339">La plantilla `{otherPagesTemplate?}` tiene un `Order` con un valor de `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-339">The `{otherPagesTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="767e0-340">Cuando se solicita una página de la carpeta *Pages/OtherPages* con un parámetro de ruta (por ejemplo, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-340">When any page in the *Pages/OtherPages* folder is requested with a route parameter (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-341">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-341">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-342">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-342">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-343">Las opciones de Razor Pages (por ejemplo, agregar <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>) se agregan cuando se incluye MVC en la colección de servicios de `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="767e0-343">Razor Pages options, such as adding <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, are added when MVC is added to the service collection in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="767e0-344">Para obtener un ejemplo, vea la [aplicación de ejemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span><span class="sxs-lookup"><span data-stu-id="767e0-344">For an example, see the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet1)]

<span data-ttu-id="767e0-345">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-345">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![La página About se solicita con un segmento de ruta de GlobalRouteValue.](razor-pages-conventions/_static/about-page-global-template.png)

### <a name="add-an-app-model-convention-to-all-pages"></a><span data-ttu-id="767e0-348">Adición de una convención de modelo de aplicación a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-348">Add an app model convention to all pages</span></span>

<span data-ttu-id="767e0-349">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de aplicación de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-349">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page app model construction.</span></span>

<span data-ttu-id="767e0-350">Para demostrar esta y otras convenciones más adelante en este tema, la aplicación de ejemplo incluye una clase `AddHeaderAttribute`.</span><span class="sxs-lookup"><span data-stu-id="767e0-350">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="767e0-351">El constructor de esta clase acepta una cadena `name` y una matriz de cadenas `values`.</span><span class="sxs-lookup"><span data-stu-id="767e0-351">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="767e0-352">Estos valores se usan en su método `OnResultExecuting` para establecer un encabezado de respuesta.</span><span class="sxs-lookup"><span data-stu-id="767e0-352">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="767e0-353">La clase completa se muestra en la sección [Convenciones de acción del modelo de página](#page-model-action-conventions) más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="767e0-353">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="767e0-354">En la aplicación de ejemplo se usa la clase `AddHeaderAttribute` para agregar un encabezado (`GlobalHeader`) a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-354">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-355">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-355">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet2)]

<span data-ttu-id="767e0-356">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-356">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que GlobalHeader se ha agregado.](razor-pages-conventions/_static/about-page-global-header.png)

### <a name="add-a-handler-model-convention-to-all-pages"></a><span data-ttu-id="767e0-358">Adición de una convención de modelo de controlador a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-358">Add a handler model convention to all pages</span></span>

<span data-ttu-id="767e0-359">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de controlador de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-359">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page handler model construction.</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalPageHandlerModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-360">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-360">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet10)]

## <a name="page-route-action-conventions"></a><span data-ttu-id="767e0-361">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-361">Page route action conventions</span></span>

<span data-ttu-id="767e0-362">El proveedor de modelos de ruta predeterminado que se deriva de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invoca convenciones diseñadas para proporcionar puntos de extensibilidad que permitan configurar rutas de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-362">The default route model provider that derives from <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

### <a name="folder-route-model-convention"></a><span data-ttu-id="767e0-363">Convención de modelo de ruta de carpeta</span><span class="sxs-lookup"><span data-stu-id="767e0-363">Folder route model convention</span></span>

<span data-ttu-id="767e0-364">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> para todas las páginas de la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-364">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for all of the pages under the specified folder.</span></span>

<span data-ttu-id="767e0-365">En la aplicación de ejemplo se usa <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> para agregar una plantilla de ruta `{otherPagesTemplate?}` a las páginas de la carpeta *OtherPages*:</span><span class="sxs-lookup"><span data-stu-id="767e0-365">The sample app uses <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet3)]

<span data-ttu-id="767e0-366">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-366">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="767e0-367">Esto garantiza que la plantilla `{globalTemplate?}` (establecida en `1` anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-367">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="767e0-368">Si se solicita una página de la carpeta *Pages/OtherPages* con un valor de parámetro de ruta (por ejemplo, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-368">If a page in the *Pages/OtherPages* folder is requested with a route parameter value (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-369">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-369">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-370">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-370">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-371">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-371">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Page1 en la carpeta OtherPages solicitada con un segmento de ruta de GlobalRouteValue y OtherPagesRouteValue](razor-pages-conventions/_static/otherpages-page1-global-and-otherpages-templates.png)

### <a name="page-route-model-convention"></a><span data-ttu-id="767e0-374">Convención de modelo de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-374">Page route model convention</span></span>

<span data-ttu-id="767e0-375">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> para la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="767e0-375">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for the page with the specified name.</span></span>

<span data-ttu-id="767e0-376">En la aplicación de ejemplo se usa `AddPageRouteModelConvention` para agregar una plantilla de ruta `{aboutTemplate?}` a la página About:</span><span class="sxs-lookup"><span data-stu-id="767e0-376">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet4)]

<span data-ttu-id="767e0-377">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-377">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="767e0-378">Esto garantiza que la plantilla `{globalTemplate?}` (establecida en `1` anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-378">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="767e0-379">Si se solicita la página About con un valor de parámetro de ruta en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["aboutTemplate"]` (`Order = 2`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-379">If the About page is requested with a route parameter value at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-380">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-380">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-381">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-381">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-382">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue/AboutRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-382">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![La página About se solicita con los segmentos de ruta de GlobalRouteValue y AboutRouteValue.](razor-pages-conventions/_static/about-page-global-and-about-templates.png)

## <a name="use-a-parameter-transformer-to-customize-page-routes"></a><span data-ttu-id="767e0-385">Uso de transformadores de parámetros para personalizar rutas de página</span><span class="sxs-lookup"><span data-stu-id="767e0-385">Use a parameter transformer to customize page routes</span></span>

<span data-ttu-id="767e0-386">Las rutas de página generadas por ASP.NET Core se pueden personalizar mediante el uso de un transformador de parámetros.</span><span class="sxs-lookup"><span data-stu-id="767e0-386">Page routes generated by ASP.NET Core can be customized using a parameter transformer.</span></span> <span data-ttu-id="767e0-387">Un transformador de parámetro implementa `IOutboundParameterTransformer` y transforma el valor de parámetros.</span><span class="sxs-lookup"><span data-stu-id="767e0-387">A parameter transformer implements `IOutboundParameterTransformer` and transforms the value of parameters.</span></span> <span data-ttu-id="767e0-388">Por ejemplo, un transformador de parámetros `SlugifyParameterTransformer` personalizado cambia el valor de ruta `SubscriptionManagement` a `subscription-management`.</span><span class="sxs-lookup"><span data-stu-id="767e0-388">For example, a custom `SlugifyParameterTransformer` parameter transformer changes the `SubscriptionManagement` route value to `subscription-management`.</span></span>

<span data-ttu-id="767e0-389">La convención de modelo de ruta de página `PageRouteTransformerConvention` aplica un transformador de parámetros a los segmentos de nombre de archivo y carpeta de las rutas de página generadas automáticamente en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-389">The `PageRouteTransformerConvention` page route model convention applies a parameter transformer to the folder and file name segments of automatically generated page routes in an app.</span></span> <span data-ttu-id="767e0-390">Por ejemplo, para el archivo de Razor Pages en */Pages/SubscriptionManagement/ViewAll.cshtml*, su ruta cambiaría de `/SubscriptionManagement/ViewAll` a `/subscription-management/view-all`.</span><span class="sxs-lookup"><span data-stu-id="767e0-390">For example, the Razor Pages file at */Pages/SubscriptionManagement/ViewAll.cshtml* would have its route rewritten from `/SubscriptionManagement/ViewAll` to `/subscription-management/view-all`.</span></span>

<span data-ttu-id="767e0-391">`PageRouteTransformerConvention` solo transforma los segmentos de una ruta de página generados automáticamente que proceden de la carpeta y del archivo llamados Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-391">`PageRouteTransformerConvention` only transforms the automatically generated segments of a page route that come from the Razor Pages folder and file name.</span></span> <span data-ttu-id="767e0-392">No transforma segmentos de ruta agregados con la directiva `@page`.</span><span class="sxs-lookup"><span data-stu-id="767e0-392">It doesn't transform route segments added with the `@page` directive.</span></span> <span data-ttu-id="767e0-393">Esta convención tampoco transforma las rutas agregadas por <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*>.</span><span class="sxs-lookup"><span data-stu-id="767e0-393">The convention also doesn't transform routes added by <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*>.</span></span>

<span data-ttu-id="767e0-394">La convención `PageRouteTransformerConvention` está registrada como una opción en `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="767e0-394">The `PageRouteTransformerConvention` is registered as an option in `Startup.ConfigureServices`:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add(
                new PageRouteTransformerConvention(
                    new SlugifyParameterTransformer()));
        });
}

public class SlugifyParameterTransformer : IOutboundParameterTransformer
{
    public string TransformOutbound(object value)
    {
        if (value == null) { return null; }

        // Slugify value
        return Regex.Replace(value.ToString(), "([a-z])([A-Z])", "$1-$2").ToLower();
    }
}
```

## <a name="configure-a-page-route"></a><span data-ttu-id="767e0-395">Configurar una ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-395">Configure a page route</span></span>

<span data-ttu-id="767e0-396">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> para configurar una ruta a una página en la ruta de acceso de página especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-396">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="767e0-397">Los vínculos generados que apuntan a esa página usan la ruta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-397">Generated links to the page use your specified route.</span></span> <span data-ttu-id="767e0-398">`AddPageRoute` usa `AddPageRouteModelConvention` para establecer la ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-398">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="767e0-399">En la aplicación de ejemplo se crea una ruta a `/TheContactPage` para *Contact.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="767e0-399">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet5)]

<span data-ttu-id="767e0-400">A la página Contact también se puede llegar en `/Contact` a través de su ruta predeterminada.</span><span class="sxs-lookup"><span data-stu-id="767e0-400">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="767e0-401">La ruta personalizada de la aplicación de ejemplo que lleva a la página Contact tiene cabida para un segmento de ruta `text` opcional (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="767e0-401">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="767e0-402">La página también incluye este segmento opcional en su directiva `@page` por si el usuario que la visita tiene acceso a la página en su ruta `/Contact`:</span><span class="sxs-lookup"><span data-stu-id="767e0-402">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[](razor-pages-conventions/samples/2.x/SampleApp/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="767e0-403">Observe que la dirección URL generada para el vínculo **Contact** en la página presentada refleja la ruta actualizada:</span><span class="sxs-lookup"><span data-stu-id="767e0-403">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Vínculo Contact de la aplicación de ejemplo en la barra de navegación](razor-pages-conventions/_static/contact-link.png)

![Si revisamos el vínculo Contact en el HTML presentado, vemos que href está establecido en "/TheContactPage".](razor-pages-conventions/_static/contact-link-source.png)

<span data-ttu-id="767e0-406">Visite la página Contact a través de su ruta normal, `/Contact`, o de la ruta personalizada, `/TheContactPage`.</span><span class="sxs-lookup"><span data-stu-id="767e0-406">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="767e0-407">Si se proporciona un segmento de ruta `text` adicional, la página muestra el segmento codificado en HTML que se ha proporcionado:</span><span class="sxs-lookup"><span data-stu-id="767e0-407">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Ejemplo del explorador Microsoft Edge en el que se proporciona un segmento de ruta opcional "text" de "TextValue" en la dirección URL](razor-pages-conventions/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="767e0-410">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="767e0-410">Page model action conventions</span></span>

<span data-ttu-id="767e0-411">El proveedor de modelos de página predeterminado que implementa <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invoca convenciones que están diseñadas para proporcionar puntos de extensibilidad que permitan configurar modelos de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-411">The default page model provider that implements <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="767e0-412">Estas convenciones son útiles al crear y modificar escenarios de detección y procesamiento de páginas.</span><span class="sxs-lookup"><span data-stu-id="767e0-412">These conventions are useful when building and modifying page discovery and processing scenarios.</span></span>

<span data-ttu-id="767e0-413">En los ejemplos de esta sección, la aplicación de ejemplo usa una clase `AddHeaderAttribute` (la cual es un atributo <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>) que aplica un encabezado de respuesta:</span><span class="sxs-lookup"><span data-stu-id="767e0-413">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, that applies a response header:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="767e0-414">Si empleamos convenciones, el ejemplo indica cómo aplicar el atributo a todas las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="767e0-414">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="767e0-415">**Convención de modelo de aplicación de carpeta**</span><span class="sxs-lookup"><span data-stu-id="767e0-415">**Folder app model convention**</span></span>

<span data-ttu-id="767e0-416">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> que invoca una acción en las instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> para todas las páginas de la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-416">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> instances for all pages under the specified folder.</span></span>

<span data-ttu-id="767e0-417">En el ejemplo se demuestra el uso de `AddFolderApplicationModelConvention` agregando un encabezado (`OtherPagesHeader`) a las páginas de la carpeta *OtherPages* de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-417">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet6)]

<span data-ttu-id="767e0-418">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-418">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página OtherPages/Page1 ponen de manifiesto que OtherPagesHeader se ha agregado.](razor-pages-conventions/_static/page1-otherpages-header.png)

<span data-ttu-id="767e0-420">**Convención de modelo de aplicación de página**</span><span class="sxs-lookup"><span data-stu-id="767e0-420">**Page app model convention**</span></span>

<span data-ttu-id="767e0-421">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> para la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="767e0-421">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> for the page with the specified name.</span></span>

<span data-ttu-id="767e0-422">En el ejemplo se demuestra el uso de `AddPageApplicationModelConvention` agregando un encabezado (`AboutHeader`) a la página About:</span><span class="sxs-lookup"><span data-stu-id="767e0-422">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet7)]

<span data-ttu-id="767e0-423">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-423">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que AboutHeader se ha agregado.](razor-pages-conventions/_static/about-page-about-header.png)

<span data-ttu-id="767e0-425">**Configurar un filtro**</span><span class="sxs-lookup"><span data-stu-id="767e0-425">**Configure a filter**</span></span>

<span data-ttu-id="767e0-426"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> permite configurar el filtro que se quiere aplicar.</span><span class="sxs-lookup"><span data-stu-id="767e0-426"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified filter to apply.</span></span> <span data-ttu-id="767e0-427">Se puede implementar una clase de filtro, pero en la aplicación de ejemplo se muestra cómo implementar un filtro en una expresión lambda, cosa que sucede en segundo plano como una fábrica que devuelve un filtro:</span><span class="sxs-lookup"><span data-stu-id="767e0-427">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet8)]

<span data-ttu-id="767e0-428">El modelo de páginas de aplicación se usa para comprobar la ruta de acceso relativa de los segmentos que conducen a la página Page2 en la carpeta *OtherPages*.</span><span class="sxs-lookup"><span data-stu-id="767e0-428">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="767e0-429">Si la condición se supera, se agrega un encabezado.</span><span class="sxs-lookup"><span data-stu-id="767e0-429">If the condition passes, a header is added.</span></span> <span data-ttu-id="767e0-430">Si no, se aplica `EmptyFilter`.</span><span class="sxs-lookup"><span data-stu-id="767e0-430">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="767e0-431">`EmptyFilter` es un [filtro de acciones](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="767e0-431">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="767e0-432">Razor Pages pasa por alto los filtros de acciones, por lo que `EmptyFilter` no funciona del modo previsto si la ruta de acceso no contiene `OtherPages/Page2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-432">Since Action filters are ignored by Razor Pages, the `EmptyFilter` has no effect as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="767e0-433">Solicite la página Page2 del ejemplo en `localhost:5000/OtherPages/Page2` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-433">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![OtherPagesPage2Header se agrega a la respuesta de Page2.](razor-pages-conventions/_static/page2-filter-header.png)

<span data-ttu-id="767e0-435">**Configurar una fábrica de filtros**</span><span class="sxs-lookup"><span data-stu-id="767e0-435">**Configure a filter factory**</span></span>

<span data-ttu-id="767e0-436"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configura la fábrica especificada para aplicar [filtros](xref:mvc/controllers/filters) a todas las instancias de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-436"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="767e0-437">En la aplicación de ejemplo se proporciona un ejemplo del uso de una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory), para lo cual se agrega un encabezado (`FilterFactoryHeader`) con dos valores a las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-437">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet9)]

<span data-ttu-id="767e0-438">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-438">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="767e0-439">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-439">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que se han agregado dos encabezados FilterFactoryHeader.](razor-pages-conventions/_static/about-page-filter-factory-header.png)

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="767e0-441">Filtros de MVC y filtro de página (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="767e0-441">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="767e0-442">Razor Pages no tiene en cuenta los [filtros de acciones](xref:mvc/controllers/filters#action-filters) de MVC, porque Razor Pages usa métodos de control.</span><span class="sxs-lookup"><span data-stu-id="767e0-442">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="767e0-443">Otros tipos de filtros de MVC que tiene a su disposición son: filtros de [autorización](xref:mvc/controllers/filters#authorization-filters), de [excepciones](xref:mvc/controllers/filters#exception-filters), de [recursos](xref:mvc/controllers/filters#resource-filters) y de [resultados](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="767e0-443">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="767e0-444">Para más información, vea el tema [Filters](xref:mvc/controllers/filters) (Filtros).</span><span class="sxs-lookup"><span data-stu-id="767e0-444">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="767e0-445">El filtro de páginas (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) se aplica a Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-445">The Page filter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="767e0-446">Para obtener más información, vea [Métodos de filtrado de Razor Pages](xref:razor-pages/filter).</span><span class="sxs-lookup"><span data-stu-id="767e0-446">For more information, see [Filter methods for Razor Pages](xref:razor-pages/filter).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="767e0-447">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="767e0-447">Additional resources</span></span>

* <xref:security/authorization/razor-pages-authorization>
* <xref:mvc/controllers/areas#areas-with-razor-pages>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="767e0-448">Aquí encontrará información para saber cómo usar las [convenciones de proveedor de modelos de aplicación y de ruta](xref:mvc/controllers/application-model#conventions) con objeto de controlar el enrutamiento, la detección y el procesamiento en aplicaciones de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-448">Learn how to use page [route and app model provider conventions](xref:mvc/controllers/application-model#conventions) to control page routing, discovery, and processing in Razor Pages apps.</span></span>

<span data-ttu-id="767e0-449">Si necesita configurar rutas de una página personalizadas para páginas concretas, configure el enrutamiento a esas páginas con la [convención AddPageRoute](#configure-a-page-route), descrita más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="767e0-449">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="767e0-450">Para especificar una ruta de página, agregar segmentos de ruta o agregar parámetros a una ruta, use la directiva de página `@page`.</span><span class="sxs-lookup"><span data-stu-id="767e0-450">To specify a page route, add route segments, or add parameters to a route, use the page's `@page` directive.</span></span> <span data-ttu-id="767e0-451">Para obtener más información, consulte [Rutas personalizadas](xref:razor-pages/index#custom-routes).</span><span class="sxs-lookup"><span data-stu-id="767e0-451">For more information, see [Custom routes](xref:razor-pages/index#custom-routes).</span></span>

<span data-ttu-id="767e0-452">Hay ciertas palabras reservadas que no se pueden usar como segmentos de ruta o nombres de parámetro.</span><span class="sxs-lookup"><span data-stu-id="767e0-452">There are reserved words that can't be used as route segments or parameter names.</span></span> <span data-ttu-id="767e0-453">Para obtener más información, vea [Enrutamiento: Nombres de enrutamientos reservados](xref:fundamentals/routing#reserved-routing-names).</span><span class="sxs-lookup"><span data-stu-id="767e0-453">For more information, see [Routing: Reserved routing names](xref:fundamentals/routing#reserved-routing-names).</span></span>

<span data-ttu-id="767e0-454">[Vea o descargue el código de ejemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([cómo descargarlo](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="767e0-454">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/) ([how to download](xref:index#how-to-download-a-sample))</span></span>

| <span data-ttu-id="767e0-455">Escenario</span><span class="sxs-lookup"><span data-stu-id="767e0-455">Scenario</span></span> | <span data-ttu-id="767e0-456">El ejemplo explica cómo...</span><span class="sxs-lookup"><span data-stu-id="767e0-456">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="767e0-457">Convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="767e0-457">Model conventions</span></span>](#model-conventions)<br><br><span data-ttu-id="767e0-458">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="767e0-458">Conventions.Add</span></span><ul><li><span data-ttu-id="767e0-459">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-459">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-460">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-460">IPageApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-461">IPageHandlerModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-461">IPageHandlerModelConvention</span></span></li></ul> | <span data-ttu-id="767e0-462">Agregar un encabezado y una plantilla de ruta a las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-462">Add a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="767e0-463">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-463">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="767e0-464">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-464">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-465">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-465">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="767e0-466">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="767e0-466">AddPageRoute</span></span></li></ul> | <span data-ttu-id="767e0-467">Agregar una plantilla de ruta a las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="767e0-467">Add a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="767e0-468">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="767e0-468">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="767e0-469">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-469">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-470">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="767e0-470">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="767e0-471">ConfigureFilter (clase de filtro, expresión lambda o fábrica de filtros)</span><span class="sxs-lookup"><span data-stu-id="767e0-471">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="767e0-472">Agregar un encabezado a las páginas de una carpeta, agregar un encabezado a una sola página y configurar una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory) para agregar un encabezado a las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-472">Add a header to pages in a folder, add a header to a single page, and configure a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |

<span data-ttu-id="767e0-473">Las convenciones de Razor Pages se agregan y configuran a través del método de extensión <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> a <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> en la colección de servicios de la clase `Startup`.</span><span class="sxs-lookup"><span data-stu-id="767e0-473">Razor Pages conventions are added and configured using the <xref:Microsoft.Extensions.DependencyInjection.MvcRazorPagesMvcBuilderExtensions.AddRazorPagesOptions*> extension method to <xref:Microsoft.Extensions.DependencyInjection.MvcServiceCollectionExtensions.AddMvc*> on the service collection in the `Startup` class.</span></span> <span data-ttu-id="767e0-474">Más avanzado el tema veremos los siguientes ejemplos de convención:</span><span class="sxs-lookup"><span data-stu-id="767e0-474">The following convention examples are explained later in this topic:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddRazorPagesOptions(options =>
        {
            options.Conventions.Add( ... );
            options.Conventions.AddFolderRouteModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageRouteModelConvention(
                "/About", model => { ... });
            options.Conventions.AddPageRoute(
                "/Contact", "TheContactPage/{text?}");
            options.Conventions.AddFolderApplicationModelConvention(
                "/OtherPages", model => { ... });
            options.Conventions.AddPageApplicationModelConvention(
                "/About", model => { ... });
            options.Conventions.ConfigureFilter(model => { ... });
            options.Conventions.ConfigureFilter( ... );
        });
}
```

## <a name="route-order"></a><span data-ttu-id="767e0-475">Ordenación de la ruta</span><span class="sxs-lookup"><span data-stu-id="767e0-475">Route order</span></span>

<span data-ttu-id="767e0-476">Las rutas especifican un <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> para su procesamiento (una coincidencia de rutas).</span><span class="sxs-lookup"><span data-stu-id="767e0-476">Routes specify an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> for processing (route matching).</span></span>

| <span data-ttu-id="767e0-477">Ordenar</span><span class="sxs-lookup"><span data-stu-id="767e0-477">Order</span></span>            | <span data-ttu-id="767e0-478">Comportamiento</span><span class="sxs-lookup"><span data-stu-id="767e0-478">Behavior</span></span> |
| :--------------: | -------- |
| <span data-ttu-id="767e0-479">-1</span><span class="sxs-lookup"><span data-stu-id="767e0-479">-1</span></span>               | <span data-ttu-id="767e0-480">La ruta se procesa antes de que se procesen otras rutas.</span><span class="sxs-lookup"><span data-stu-id="767e0-480">The route is processed before other routes are processed.</span></span> |
| <span data-ttu-id="767e0-481">0</span><span class="sxs-lookup"><span data-stu-id="767e0-481">0</span></span>                | <span data-ttu-id="767e0-482">No se ha especificado ningún orden (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="767e0-482">Order isn't specified (default value).</span></span> <span data-ttu-id="767e0-483">Si no se asigna un valor `Order` (`Order = null`), el valor `Order` predeterminado de la ruta para su procesamiento es 0 (cero).</span><span class="sxs-lookup"><span data-stu-id="767e0-483">Not assigning `Order` (`Order = null`) defaults the route `Order` to 0 (zero) for processing.</span></span> |
| <span data-ttu-id="767e0-484">1, 2, &hellip; n</span><span class="sxs-lookup"><span data-stu-id="767e0-484">1, 2, &hellip; n</span></span> | <span data-ttu-id="767e0-485">Especifica el orden de procesamiento de la ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-485">Specifies the route processing order.</span></span> |

<span data-ttu-id="767e0-486">El procesamiento de rutas se establece por convención:</span><span class="sxs-lookup"><span data-stu-id="767e0-486">Route processing is established by convention:</span></span>

* <span data-ttu-id="767e0-487">Las rutas se procesan en orden secuencial (-1, 0, 1, 2&hellip; n).</span><span class="sxs-lookup"><span data-stu-id="767e0-487">Routes are processed in sequential order (-1, 0, 1, 2, &hellip; n).</span></span>
* <span data-ttu-id="767e0-488">Cuando las rutas tienen el mismo orden (`Order`), primero se asigna la ruta más específica y, después, las rutas menos específicas.</span><span class="sxs-lookup"><span data-stu-id="767e0-488">When routes have the same `Order`, the most specific route is matched first followed by less specific routes.</span></span>
* <span data-ttu-id="767e0-489">Cuando varias rutas con el mismo orden (`Order`) y el mismo número de parámetros coinciden con una URL de solicitud, se procesan en el orden en que se han agregado a la clase <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span><span class="sxs-lookup"><span data-stu-id="767e0-489">When routes with the same `Order` and the same number of parameters match a request URL, routes are processed in the order that they're added to the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection>.</span></span>

<span data-ttu-id="767e0-490">Si es posible, evite depender de un orden de procesamiento de rutas establecido.</span><span class="sxs-lookup"><span data-stu-id="767e0-490">If possible, avoid depending on an established route processing order.</span></span> <span data-ttu-id="767e0-491">Por lo general, el enrutamiento selecciona la ruta correcta con la coincidencia de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="767e0-491">Generally, routing selects the correct route with URL matching.</span></span> <span data-ttu-id="767e0-492">Si tiene que establecer propiedades de orden (`Order`) de las rutas para enrutar las solicitudes correctamente, es probable que el esquema de enrutamiento de la aplicación resulte confuso para los clientes y cueste mantenerlo.</span><span class="sxs-lookup"><span data-stu-id="767e0-492">If you must set route `Order` properties to route requests correctly, the app's routing scheme is probably confusing to clients and fragile to maintain.</span></span> <span data-ttu-id="767e0-493">Trate de simplificar el esquema de enrutamiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-493">Seek to simplify the app's routing scheme.</span></span> <span data-ttu-id="767e0-494">La aplicación de ejemplo requiere un orden de procesamiento de rutas explícito para mostrar varios escenarios de enrutamiento con una sola aplicación.</span><span class="sxs-lookup"><span data-stu-id="767e0-494">The sample app requires an explicit route processing order to demonstrate several routing scenarios using a single app.</span></span> <span data-ttu-id="767e0-495">Sin embargo, intente evitar configurar un orden (`Order`) de enrutamiento en aplicaciones de producción.</span><span class="sxs-lookup"><span data-stu-id="767e0-495">However, you should attempt to avoid the practice of setting route `Order` in production apps.</span></span>

<span data-ttu-id="767e0-496">El enrutamiento de Razor Pages y el del controlador MVC comparten una implementación.</span><span class="sxs-lookup"><span data-stu-id="767e0-496">Razor Pages routing and MVC controller routing share an implementation.</span></span> <span data-ttu-id="767e0-497">Puede encontrar más información sobre el orden de las rutas y MVC en el artículo [Enrutamiento a acciones de controlador: Ordenación de rutas de atributo](xref:mvc/controllers/routing#ordering-attribute-routes).</span><span class="sxs-lookup"><span data-stu-id="767e0-497">Information on route order in the MVC topics is available at [Routing to controller actions: Ordering attribute routes](xref:mvc/controllers/routing#ordering-attribute-routes).</span></span>

## <a name="model-conventions"></a><span data-ttu-id="767e0-498">Convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="767e0-498">Model conventions</span></span>

<span data-ttu-id="767e0-499">Agregue un delegado de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> con el fin de agregar [convenciones de modelo](xref:mvc/controllers/application-model#conventions) que se apliquen a Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-499">Add a delegate for <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> to add [model conventions](xref:mvc/controllers/application-model#conventions) that apply to Razor Pages.</span></span>

### <a name="add-a-route-model-convention-to-all-pages"></a><span data-ttu-id="767e0-500">Adición de una convención de modelo de ruta a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-500">Add a route model convention to all pages</span></span>

<span data-ttu-id="767e0-501">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de ruta de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-501">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page route model construction.</span></span>

<span data-ttu-id="767e0-502">En la aplicación de ejemplo se agrega una plantilla de ruta `{globalTemplate?}` a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-502">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-503">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `1`.</span><span class="sxs-lookup"><span data-stu-id="767e0-503">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `1`.</span></span> <span data-ttu-id="767e0-504">Esto garantiza el siguiente comportamiento de coincidencia de rutas en la aplicación de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="767e0-504">This ensures the following route matching behavior in the sample app:</span></span>

* <span data-ttu-id="767e0-505">Más adelante en este mismo tema se incluye una plantilla de ruta para `TheContactPage/{text?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-505">A route template for `TheContactPage/{text?}` is added later in the topic.</span></span> <span data-ttu-id="767e0-506">La ruta de la página Contact tiene un orden predeterminado de `null` (`Order = 0`), por lo que coincide antes de la plantilla de ruta `{globalTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-506">The Contact Page route has a default order of `null` (`Order = 0`), so it matches before the `{globalTemplate?}` route template.</span></span>
* <span data-ttu-id="767e0-507">Más adelante en este mismo tema se incluye una plantilla de ruta `{aboutTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-507">An `{aboutTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="767e0-508">La plantilla `{aboutTemplate?}` tiene un `Order` con un valor de `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-508">The `{aboutTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="767e0-509">Cuando la página About se solicita en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no `RouteData.Values["aboutTemplate"]` (`Order = 2`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-509">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>
* <span data-ttu-id="767e0-510">Más adelante en este mismo tema se incluye una plantilla de ruta `{otherPagesTemplate?}`.</span><span class="sxs-lookup"><span data-stu-id="767e0-510">An `{otherPagesTemplate?}` route template is added later in the topic.</span></span> <span data-ttu-id="767e0-511">La plantilla `{otherPagesTemplate?}` tiene un `Order` con un valor de `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-511">The `{otherPagesTemplate?}` template is given an `Order` of `2`.</span></span> <span data-ttu-id="767e0-512">Cuando se solicita una página de la carpeta *Pages/OtherPages* con un parámetro de ruta (por ejemplo, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-512">When any page in the *Pages/OtherPages* folder is requested with a route parameter (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-513">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-513">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-514">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-514">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-515">Las opciones de Razor Pages (por ejemplo, agregar <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>) se agregan cuando se incluye MVC en la colección de servicios de `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="767e0-515">Razor Pages options, such as adding <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions>, are added when MVC is added to the service collection in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="767e0-516">Para obtener un ejemplo, vea la [aplicación de ejemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span><span class="sxs-lookup"><span data-stu-id="767e0-516">For an example, see the [sample app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/razor-pages/razor-pages-conventions/samples/).</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet1)]

<span data-ttu-id="767e0-517">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-517">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![La página About se solicita con un segmento de ruta de GlobalRouteValue.](razor-pages-conventions/_static/about-page-global-template.png)

### <a name="add-an-app-model-convention-to-all-pages"></a><span data-ttu-id="767e0-520">Adición de una convención de modelo de aplicación a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-520">Add an app model convention to all pages</span></span>

<span data-ttu-id="767e0-521">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de aplicación de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-521">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page app model construction.</span></span>

<span data-ttu-id="767e0-522">Para demostrar esta y otras convenciones más adelante en este tema, la aplicación de ejemplo incluye una clase `AddHeaderAttribute`.</span><span class="sxs-lookup"><span data-stu-id="767e0-522">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="767e0-523">El constructor de esta clase acepta una cadena `name` y una matriz de cadenas `values`.</span><span class="sxs-lookup"><span data-stu-id="767e0-523">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="767e0-524">Estos valores se usan en su método `OnResultExecuting` para establecer un encabezado de respuesta.</span><span class="sxs-lookup"><span data-stu-id="767e0-524">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="767e0-525">La clase completa se muestra en la sección [Convenciones de acción del modelo de página](#page-model-action-conventions) más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="767e0-525">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="767e0-526">En la aplicación de ejemplo se usa la clase `AddHeaderAttribute` para agregar un encabezado (`GlobalHeader`) a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-526">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-527">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-527">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet2)]

<span data-ttu-id="767e0-528">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-528">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que GlobalHeader se ha agregado.](razor-pages-conventions/_static/about-page-global-header.png)

### <a name="add-a-handler-model-convention-to-all-pages"></a><span data-ttu-id="767e0-530">Adición de una convención de modelo de controlador a todas las páginas</span><span class="sxs-lookup"><span data-stu-id="767e0-530">Add a handler model convention to all pages</span></span>

<span data-ttu-id="767e0-531">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> a la colección de instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> que se van a aplicar durante la construcción del modelo de controlador de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-531">Use <xref:Microsoft.AspNetCore.Mvc.RazorPages.RazorPagesOptions.Conventions> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageHandlerModelConvention> to the collection of <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageConvention> instances that are applied during page handler model construction.</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Conventions/GlobalPageHandlerModelConvention.cs?name=snippet1)]

<span data-ttu-id="767e0-532">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-532">*Startup.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet10)]

## <a name="page-route-action-conventions"></a><span data-ttu-id="767e0-533">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-533">Page route action conventions</span></span>

<span data-ttu-id="767e0-534">El proveedor de modelos de ruta predeterminado que se deriva de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invoca convenciones diseñadas para proporcionar puntos de extensibilidad que permitan configurar rutas de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-534">The default route model provider that derives from <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelProvider> invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

### <a name="folder-route-model-convention"></a><span data-ttu-id="767e0-535">Convención de modelo de ruta de carpeta</span><span class="sxs-lookup"><span data-stu-id="767e0-535">Folder route model convention</span></span>

<span data-ttu-id="767e0-536">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> para todas las páginas de la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-536">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for all of the pages under the specified folder.</span></span>

<span data-ttu-id="767e0-537">En la aplicación de ejemplo se usa <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> para agregar una plantilla de ruta `{otherPagesTemplate?}` a las páginas de la carpeta *OtherPages*:</span><span class="sxs-lookup"><span data-stu-id="767e0-537">The sample app uses <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderRouteModelConvention*> to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet3)]

<span data-ttu-id="767e0-538">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-538">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="767e0-539">Esto garantiza que la plantilla `{globalTemplate?}` (establecida en `1` anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-539">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="767e0-540">Si se solicita una página de la carpeta *Pages/OtherPages* con un valor de parámetro de ruta (por ejemplo, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-540">If a page in the *Pages/OtherPages* folder is requested with a route parameter value (for example, `/OtherPages/Page1/RouteDataValue`), "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-541">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-541">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-542">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-542">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-543">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-543">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Page1 en la carpeta OtherPages solicitada con un segmento de ruta de GlobalRouteValue y OtherPagesRouteValue](razor-pages-conventions/_static/otherpages-page1-global-and-otherpages-templates.png)

### <a name="page-route-model-convention"></a><span data-ttu-id="767e0-546">Convención de modelo de ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-546">Page route model convention</span></span>

<span data-ttu-id="767e0-547">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> para la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="767e0-547">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageRouteModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageRouteModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteModel> for the page with the specified name.</span></span>

<span data-ttu-id="767e0-548">En la aplicación de ejemplo se usa `AddPageRouteModelConvention` para agregar una plantilla de ruta `{aboutTemplate?}` a la página About:</span><span class="sxs-lookup"><span data-stu-id="767e0-548">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet4)]

<span data-ttu-id="767e0-549">La propiedad <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> de <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> está establecida en `2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-549">The <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel.Order*> property for the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.AttributeRouteModel> is set to `2`.</span></span> <span data-ttu-id="767e0-550">Esto garantiza que la plantilla `{globalTemplate?}` (establecida en `1` anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-550">This ensures that the template for `{globalTemplate?}` (set earlier in the topic to `1`) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="767e0-551">Si se solicita la página About con un valor de parámetro de ruta en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 1`) y no en `RouteData.Values["aboutTemplate"]` (`Order = 2`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="767e0-551">If the About page is requested with a route parameter value at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 1`) and not `RouteData.Values["aboutTemplate"]` (`Order = 2`) due to setting the `Order` property.</span></span>

<span data-ttu-id="767e0-552">Siempre que sea posible, no especifique el valor de `Order`, lo que da como resultado `Order = 0`.</span><span class="sxs-lookup"><span data-stu-id="767e0-552">Wherever possible, don't set the `Order`, which results in `Order = 0`.</span></span> <span data-ttu-id="767e0-553">Deje que el enrutamiento seleccione la ruta correcta.</span><span class="sxs-lookup"><span data-stu-id="767e0-553">Rely on routing to select the correct route.</span></span>

<span data-ttu-id="767e0-554">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue/AboutRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-554">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![La página About se solicita con los segmentos de ruta de GlobalRouteValue y AboutRouteValue.](razor-pages-conventions/_static/about-page-global-and-about-templates.png)

## <a name="configure-a-page-route"></a><span data-ttu-id="767e0-557">Configurar una ruta de página</span><span class="sxs-lookup"><span data-stu-id="767e0-557">Configure a page route</span></span>

<span data-ttu-id="767e0-558">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> para configurar una ruta a una página en la ruta de acceso de página especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-558">Use <xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.AddPageRoute*> to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="767e0-559">Los vínculos generados que apuntan a esa página usan la ruta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-559">Generated links to the page use your specified route.</span></span> <span data-ttu-id="767e0-560">`AddPageRoute` usa `AddPageRouteModelConvention` para establecer la ruta.</span><span class="sxs-lookup"><span data-stu-id="767e0-560">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="767e0-561">En la aplicación de ejemplo se crea una ruta a `/TheContactPage` para *Contact.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="767e0-561">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet5)]

<span data-ttu-id="767e0-562">A la página Contact también se puede llegar en `/Contact` a través de su ruta predeterminada.</span><span class="sxs-lookup"><span data-stu-id="767e0-562">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="767e0-563">La ruta personalizada de la aplicación de ejemplo que lleva a la página Contact tiene cabida para un segmento de ruta `text` opcional (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="767e0-563">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="767e0-564">La página también incluye este segmento opcional en su directiva `@page` por si el usuario que la visita tiene acceso a la página en su ruta `/Contact`:</span><span class="sxs-lookup"><span data-stu-id="767e0-564">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[](razor-pages-conventions/samples/2.x/SampleApp/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="767e0-565">Observe que la dirección URL generada para el vínculo **Contact** en la página presentada refleja la ruta actualizada:</span><span class="sxs-lookup"><span data-stu-id="767e0-565">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Vínculo Contact de la aplicación de ejemplo en la barra de navegación](razor-pages-conventions/_static/contact-link.png)

![Si revisamos el vínculo Contact en el HTML presentado, vemos que href está establecido en "/TheContactPage".](razor-pages-conventions/_static/contact-link-source.png)

<span data-ttu-id="767e0-568">Visite la página Contact a través de su ruta normal, `/Contact`, o de la ruta personalizada, `/TheContactPage`.</span><span class="sxs-lookup"><span data-stu-id="767e0-568">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="767e0-569">Si se proporciona un segmento de ruta `text` adicional, la página muestra el segmento codificado en HTML que se ha proporcionado:</span><span class="sxs-lookup"><span data-stu-id="767e0-569">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Ejemplo del explorador Microsoft Edge en el que se proporciona un segmento de ruta opcional "text" de "TextValue" en la dirección URL](razor-pages-conventions/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="767e0-572">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="767e0-572">Page model action conventions</span></span>

<span data-ttu-id="767e0-573">El proveedor de modelos de página predeterminado que implementa <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invoca convenciones que están diseñadas para proporcionar puntos de extensibilidad que permitan configurar modelos de página.</span><span class="sxs-lookup"><span data-stu-id="767e0-573">The default page model provider that implements <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelProvider> invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="767e0-574">Estas convenciones son útiles al crear y modificar escenarios de detección y procesamiento de páginas.</span><span class="sxs-lookup"><span data-stu-id="767e0-574">These conventions are useful when building and modifying page discovery and processing scenarios.</span></span>

<span data-ttu-id="767e0-575">En los ejemplos de esta sección, la aplicación de ejemplo usa una clase `AddHeaderAttribute` (la cual es un atributo <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>) que aplica un encabezado de respuesta:</span><span class="sxs-lookup"><span data-stu-id="767e0-575">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a <xref:Microsoft.AspNetCore.Mvc.Filters.ResultFilterAttribute>, that applies a response header:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="767e0-576">Si empleamos convenciones, el ejemplo indica cómo aplicar el atributo a todas las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="767e0-576">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="767e0-577">**Convención de modelo de aplicación de carpeta**</span><span class="sxs-lookup"><span data-stu-id="767e0-577">**Folder app model convention**</span></span>

<span data-ttu-id="767e0-578">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> que invoca una acción en las instancias <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> para todas las páginas de la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="767e0-578">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddFolderApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> instances for all pages under the specified folder.</span></span>

<span data-ttu-id="767e0-579">En el ejemplo se demuestra el uso de `AddFolderApplicationModelConvention` agregando un encabezado (`OtherPagesHeader`) a las páginas de la carpeta *OtherPages* de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-579">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet6)]

<span data-ttu-id="767e0-580">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-580">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página OtherPages/Page1 ponen de manifiesto que OtherPagesHeader se ha agregado.](razor-pages-conventions/_static/page1-otherpages-header.png)

<span data-ttu-id="767e0-582">**Convención de modelo de aplicación de página**</span><span class="sxs-lookup"><span data-stu-id="767e0-582">**Page app model convention**</span></span>

<span data-ttu-id="767e0-583">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> para crear y agregar un elemento <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> que invoca una acción en <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> para la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="767e0-583">Use <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageConventionCollection.AddPageApplicationModelConvention*> to create and add an <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.IPageApplicationModelConvention> that invokes an action on the <xref:Microsoft.AspNetCore.Mvc.ApplicationModels.PageApplicationModel> for the page with the specified name.</span></span>

<span data-ttu-id="767e0-584">En el ejemplo se demuestra el uso de `AddPageApplicationModelConvention` agregando un encabezado (`AboutHeader`) a la página About:</span><span class="sxs-lookup"><span data-stu-id="767e0-584">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet7)]

<span data-ttu-id="767e0-585">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-585">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que AboutHeader se ha agregado.](razor-pages-conventions/_static/about-page-about-header.png)

<span data-ttu-id="767e0-587">**Configurar un filtro**</span><span class="sxs-lookup"><span data-stu-id="767e0-587">**Configure a filter**</span></span>

<span data-ttu-id="767e0-588"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> permite configurar el filtro que se quiere aplicar.</span><span class="sxs-lookup"><span data-stu-id="767e0-588"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified filter to apply.</span></span> <span data-ttu-id="767e0-589">Se puede implementar una clase de filtro, pero en la aplicación de ejemplo se muestra cómo implementar un filtro en una expresión lambda, cosa que sucede en segundo plano como una fábrica que devuelve un filtro:</span><span class="sxs-lookup"><span data-stu-id="767e0-589">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet8)]

<span data-ttu-id="767e0-590">El modelo de páginas de aplicación se usa para comprobar la ruta de acceso relativa de los segmentos que conducen a la página Page2 en la carpeta *OtherPages*.</span><span class="sxs-lookup"><span data-stu-id="767e0-590">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="767e0-591">Si la condición se supera, se agrega un encabezado.</span><span class="sxs-lookup"><span data-stu-id="767e0-591">If the condition passes, a header is added.</span></span> <span data-ttu-id="767e0-592">Si no, se aplica `EmptyFilter`.</span><span class="sxs-lookup"><span data-stu-id="767e0-592">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="767e0-593">`EmptyFilter` es un [filtro de acciones](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="767e0-593">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="767e0-594">Razor Pages pasa por alto los filtros de acciones, por lo que `EmptyFilter` no funciona del modo previsto si la ruta de acceso no contiene `OtherPages/Page2`.</span><span class="sxs-lookup"><span data-stu-id="767e0-594">Since Action filters are ignored by Razor Pages, the `EmptyFilter` has no effect as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="767e0-595">Solicite la página Page2 del ejemplo en `localhost:5000/OtherPages/Page2` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-595">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![OtherPagesPage2Header se agrega a la respuesta de Page2.](razor-pages-conventions/_static/page2-filter-header.png)

<span data-ttu-id="767e0-597">**Configurar una fábrica de filtros**</span><span class="sxs-lookup"><span data-stu-id="767e0-597">**Configure a filter factory**</span></span>

<span data-ttu-id="767e0-598"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configura la fábrica especificada para aplicar [filtros](xref:mvc/controllers/filters) a todas las instancias de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-598"><xref:Microsoft.Extensions.DependencyInjection.PageConventionCollectionExtensions.ConfigureFilter*> configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="767e0-599">En la aplicación de ejemplo se proporciona un ejemplo del uso de una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory), para lo cual se agrega un encabezado (`FilterFactoryHeader`) con dos valores a las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="767e0-599">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Startup.cs?name=snippet9)]

<span data-ttu-id="767e0-600">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="767e0-600">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[](razor-pages-conventions/samples/2.x/SampleApp/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="767e0-601">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="767e0-601">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que se han agregado dos encabezados FilterFactoryHeader.](razor-pages-conventions/_static/about-page-filter-factory-header.png)

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="767e0-603">Filtros de MVC y filtro de página (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="767e0-603">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="767e0-604">Razor Pages no tiene en cuenta los [filtros de acciones](xref:mvc/controllers/filters#action-filters) de MVC, porque Razor Pages usa métodos de control.</span><span class="sxs-lookup"><span data-stu-id="767e0-604">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="767e0-605">Otros tipos de filtros de MVC que tiene a su disposición son: filtros de [autorización](xref:mvc/controllers/filters#authorization-filters), de [excepciones](xref:mvc/controllers/filters#exception-filters), de [recursos](xref:mvc/controllers/filters#resource-filters) y de [resultados](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="767e0-605">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="767e0-606">Para más información, vea el tema [Filters](xref:mvc/controllers/filters) (Filtros).</span><span class="sxs-lookup"><span data-stu-id="767e0-606">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="767e0-607">El filtro de páginas (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) se aplica a Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="767e0-607">The Page filter (<xref:Microsoft.AspNetCore.Mvc.Filters.IPageFilter>) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="767e0-608">Para obtener más información, vea [Métodos de filtrado de Razor Pages](xref:razor-pages/filter).</span><span class="sxs-lookup"><span data-stu-id="767e0-608">For more information, see [Filter methods for Razor Pages](xref:razor-pages/filter).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="767e0-609">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="767e0-609">Additional resources</span></span>

* <xref:security/authorization/razor-pages-authorization>
* <xref:mvc/controllers/areas#areas-with-razor-pages>

::: moniker-end
