---
<span data-ttu-id="71afa-101">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-101">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-102">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-102">'Blazor'</span></span>
- <span data-ttu-id="71afa-103">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-103">'Identity'</span></span>
- <span data-ttu-id="71afa-104">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-104">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-105">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-105">'Razor'</span></span>
- <span data-ttu-id="71afa-106">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-106">'SignalR' uid:</span></span> 

---
# <a name="host-aspnet-core-in-a-web-farm"></a><span data-ttu-id="71afa-107">Hospedaje de ASP.NET Core en una granja de servidores web</span><span class="sxs-lookup"><span data-stu-id="71afa-107">Host ASP.NET Core in a web farm</span></span>

<span data-ttu-id="71afa-108">Por [Chris Ross](https://github.com/Tratcher)</span><span class="sxs-lookup"><span data-stu-id="71afa-108">By [Chris Ross](https://github.com/Tratcher)</span></span>

<span data-ttu-id="71afa-109">Una *granja de servidores web* es un grupo de dos o más servidores web (o *nodos*) que hospedan varias instancias de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="71afa-109">A *web farm* is a group of two or more web servers (or *nodes*) that host multiple instances of an app.</span></span> <span data-ttu-id="71afa-110">Cuando llegan solicitudes de usuarios a una granja de servidores web, un *equilibrador de carga* las distribuye a los nodos de la granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-110">When requests from users arrive to a web farm, a *load balancer* distributes the requests to the web farm's nodes.</span></span> <span data-ttu-id="71afa-111">Las granjas de servidores web mejoran lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="71afa-111">Web farms improve:</span></span>

* <span data-ttu-id="71afa-112">**Confiabilidad y disponibilidad**: cuando se produce un error en uno o más nodos, el equilibrador de carga puede enrutar las solicitudes a otros nodos en funcionamiento para continuar procesando las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="71afa-112">**Reliability/availability**: When one or more nodes fail, the load balancer can route requests to other functioning nodes to continue processing requests.</span></span>
* <span data-ttu-id="71afa-113">**Capacidad y rendimiento**: varios nodos pueden procesar más solicitudes que un solo servidor.</span><span class="sxs-lookup"><span data-stu-id="71afa-113">**Capacity/performance**: Multiple nodes can process more requests than a single server.</span></span> <span data-ttu-id="71afa-114">El equilibrador de carga equilibra la carga de trabajo mediante la distribución de las solicitudes a los distintos nodos.</span><span class="sxs-lookup"><span data-stu-id="71afa-114">The load balancer balances the workload by distributing requests to the nodes.</span></span>
* <span data-ttu-id="71afa-115">**Escalabilidad**: cuando se requiere más o menos capacidad, es posible aumentar o disminuir la cantidad de nodos activos para coincidir con la carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="71afa-115">**Scalability**: When more or less capacity is required, the number of active nodes can be increased or decreased to match the workload.</span></span> <span data-ttu-id="71afa-116">Las tecnologías de plataforma de granjas de servidores web, como [Azure App Service](https://azure.microsoft.com/services/app-service/), pueden agregar o quitar nodos de manera automática si lo solicita el administrador del sistema o sin intervención humana.</span><span class="sxs-lookup"><span data-stu-id="71afa-116">Web farm platform technologies, such as [Azure App Service](https://azure.microsoft.com/services/app-service/), can automatically add or remove nodes at the request of the system administrator or automatically without human intervention.</span></span>
* <span data-ttu-id="71afa-117">**Mantenimiento**: los nodos de una granja de servidores web se pueden basar en un conjunto de servicios compartidos, lo que facilita la administración del sistema.</span><span class="sxs-lookup"><span data-stu-id="71afa-117">**Maintainability**: Nodes of a web farm can rely on a set of shared services, which results in easier system management.</span></span> <span data-ttu-id="71afa-118">Por ejemplo, los nodos de una granja de servidores web pueden basarse en un servidor de base de datos única y una ubicación de red común para los recursos estáticos, como imágenes y archivos descargables.</span><span class="sxs-lookup"><span data-stu-id="71afa-118">For example, the nodes of a web farm can rely upon a single database server and a common network location for static resources, such as images and downloadable files.</span></span>

<span data-ttu-id="71afa-119">En este tema se describe la configuración y las dependencias de las aplicaciones de ASP.NET Core hospedadas en una granja de servidores web que se basan en los recursos compartidos.</span><span class="sxs-lookup"><span data-stu-id="71afa-119">This topic describes configuration and dependencies for ASP.NET core apps hosted in a web farm that rely upon shared resources.</span></span>

## <a name="general-configuration"></a><span data-ttu-id="71afa-120">Configuración general</span><span class="sxs-lookup"><span data-stu-id="71afa-120">General configuration</span></span>

<xref:host-and-deploy/index>  
<span data-ttu-id="71afa-121">Obtenga información sobre cómo configurar entornos de hospedaje e implementar aplicaciones de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="71afa-121">Learn how to set up hosting environments and deploy ASP.NET Core apps.</span></span> <span data-ttu-id="71afa-122">Configure un administrador de procesos en cada nodo de la granja de servidores web para automatizar los inicios y reinicios de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="71afa-122">Configure a process manager on each node of the web farm to automate app starts and restarts.</span></span> <span data-ttu-id="71afa-123">Cada nodo requiere el tiempo de ejecución de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="71afa-123">Each node requires the ASP.NET Core runtime.</span></span> <span data-ttu-id="71afa-124">Para más información, consulte los temas que aparecen en el área [Hospedaje e implementación](xref:host-and-deploy/index) de la documentación.</span><span class="sxs-lookup"><span data-stu-id="71afa-124">For more information, see the topics in the [Host and deploy](xref:host-and-deploy/index) area of the documentation.</span></span>

<xref:host-and-deploy/proxy-load-balancer>  
<span data-ttu-id="71afa-125">Aprenda sobre la configuración de las aplicaciones hospedadas detrás de los servidores proxy y equilibradores de carga, que con frecuencia ocultan información importante sobre las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="71afa-125">Learn about configuration for apps hosted behind proxy servers and load balancers, which often obscure important request information.</span></span>

<xref:host-and-deploy/azure-apps/index>  
<span data-ttu-id="71afa-126">[Azure App Service](https://azure.microsoft.com/services/app-service/) es un [servicio de plataforma de informática en la nube de Microsoft](https://azure.microsoft.com/) que sirve para hospedar aplicaciones web, como ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="71afa-126">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a [Microsoft cloud computing platform service](https://azure.microsoft.com/) for hosting web apps, including ASP.NET Core.</span></span> <span data-ttu-id="71afa-127">App Service es una plataforma completamente administrada que brinda escalado automático, equilibrio de carga, aplicación de revisiones e implementación continua.</span><span class="sxs-lookup"><span data-stu-id="71afa-127">App Service is a fully managed platform that provides automatic scaling, load balancing, patching, and continuous deployment.</span></span>

## <a name="app-data"></a><span data-ttu-id="71afa-128">Datos de la aplicación</span><span class="sxs-lookup"><span data-stu-id="71afa-128">App data</span></span>

<span data-ttu-id="71afa-129">Cuando una aplicación se escala a varias instancias, puede haber un estado de la aplicación que requiera el uso compartido entre los distintos nodos.</span><span class="sxs-lookup"><span data-stu-id="71afa-129">When an app is scaled to multiple instances, there might be app state that requires sharing across nodes.</span></span> <span data-ttu-id="71afa-130">Si el estado es transitorio, considere el uso compartido de [IDistributedCache](/dotnet/api/microsoft.extensions.caching.distributed.idistributedcache).</span><span class="sxs-lookup"><span data-stu-id="71afa-130">If the state is transient, consider sharing an [IDistributedCache](/dotnet/api/microsoft.extensions.caching.distributed.idistributedcache).</span></span> <span data-ttu-id="71afa-131">Si es necesario mantener el estado compartido, considere la posibilidad de almacenar el estado compartido en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="71afa-131">If the shared state requires persistence, consider storing the shared state in a database.</span></span>

## <a name="required-configuration"></a><span data-ttu-id="71afa-132">Configuración necesaria</span><span class="sxs-lookup"><span data-stu-id="71afa-132">Required configuration</span></span>

<span data-ttu-id="71afa-133">La protección de datos y el almacenamiento en caché requieren la configuración de las aplicaciones implementadas en una granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-133">Data Protection and Caching require configuration for apps deployed to a web farm.</span></span>

### <a name="data-protection"></a><span data-ttu-id="71afa-134">Protección de datos</span><span class="sxs-lookup"><span data-stu-id="71afa-134">Data Protection</span></span>

<span data-ttu-id="71afa-135">Las aplicaciones usan el [sistema de protección de datos de ASP.NET Core](xref:security/data-protection/introduction) para proteger los datos.</span><span class="sxs-lookup"><span data-stu-id="71afa-135">The [ASP.NET Core Data Protection system](xref:security/data-protection/introduction) is used by apps to protect data.</span></span> <span data-ttu-id="71afa-136">La protección de datos se basa en un conjunto de claves criptográficas almacenadas en un *conjunto de claves*.</span><span class="sxs-lookup"><span data-stu-id="71afa-136">Data Protection relies upon a set of cryptographic keys stored in a *key ring*.</span></span> <span data-ttu-id="71afa-137">Cuando se inicializa el sistema de protección de datos, aplica la [configuración predeterminada](xref:security/data-protection/configuration/default-settings) que almacena localmente el conjunto de claves.</span><span class="sxs-lookup"><span data-stu-id="71afa-137">When the Data Protection system is initialized, it applies [default settings](xref:security/data-protection/configuration/default-settings) that store the key ring locally.</span></span> <span data-ttu-id="71afa-138">Según la configuración predeterminada, un conjunto de claves único se almacena en cada nodo de la granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-138">Under the default configuration, a unique key ring is stored on each node of the web farm.</span></span> <span data-ttu-id="71afa-139">Por tanto, un nodo de granja de servidores web no puede cifrar los datos que una aplicación cifra en otro nodo.</span><span class="sxs-lookup"><span data-stu-id="71afa-139">Consequently, each web farm node can't decrypt data that's encrypted by an app on any other node.</span></span> <span data-ttu-id="71afa-140">Por lo general, la configuración predeterminada no es adecuada para hospedar aplicaciones en una granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-140">The default configuration isn't generally appropriate for hosting apps in a web farm.</span></span> <span data-ttu-id="71afa-141">Una alternativa a la implementación de un conjunto de claves compartido es enrutar siempre las solicitudes de usuario al mismo nodo.</span><span class="sxs-lookup"><span data-stu-id="71afa-141">An alternative to implementing a shared key ring is to always route user requests to the same node.</span></span> <span data-ttu-id="71afa-142">Para más información sobre la configuración del sistema de protección de datos para las implementaciones de granjas de servidores web, consulte <xref:security/data-protection/configuration/overview>.</span><span class="sxs-lookup"><span data-stu-id="71afa-142">For more information on Data Protection system configuration for web farm deployments, see <xref:security/data-protection/configuration/overview>.</span></span>

### <a name="caching"></a><span data-ttu-id="71afa-143">Almacenamiento en memoria caché</span><span class="sxs-lookup"><span data-stu-id="71afa-143">Caching</span></span>

<span data-ttu-id="71afa-144">En un entorno de granja de servidores web, el mecanismo de almacenamiento en caché debe compartir elementos en caché en todos los nodos de la granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-144">In a web farm environment, the caching mechanism must share cached items across the web farm's nodes.</span></span> <span data-ttu-id="71afa-145">El almacenamiento en caché debe basarse en una instancia común de Redis Cache, en una base de datos SQL Server compartida o en una implementación de almacenamiento en caché personalizada que comparte los elementos en caché en toda la granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-145">Caching must either rely upon a common Redis cache, a shared SQL Server database, or a custom caching implementation that shares cached items across the web farm.</span></span> <span data-ttu-id="71afa-146">Para obtener más información, vea <xref:performance/caching/distributed>.</span><span class="sxs-lookup"><span data-stu-id="71afa-146">For more information, see <xref:performance/caching/distributed>.</span></span>

## <a name="dependent-components"></a><span data-ttu-id="71afa-147">Componentes dependientes</span><span class="sxs-lookup"><span data-stu-id="71afa-147">Dependent components</span></span>

<span data-ttu-id="71afa-148">Los escenarios siguientes no requieren configuración adicional, pero dependen de tecnologías que sí requiere configuración para las granjas de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-148">The following scenarios don't require additional configuration, but they depend on technologies that require configuration for web farms.</span></span>

| <span data-ttu-id="71afa-149">Escenario</span><span class="sxs-lookup"><span data-stu-id="71afa-149">Scenario</span></span> | <span data-ttu-id="71afa-150">Depende de &hellip;</span><span class="sxs-lookup"><span data-stu-id="71afa-150">Depends on &hellip;</span></span> |
| ---
<span data-ttu-id="71afa-151">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-151">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-152">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-152">'Blazor'</span></span>
- <span data-ttu-id="71afa-153">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-153">'Identity'</span></span>
- <span data-ttu-id="71afa-154">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-154">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-155">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-155">'Razor'</span></span>
- <span data-ttu-id="71afa-156">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-156">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-157">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-157">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-158">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-158">'Blazor'</span></span>
- <span data-ttu-id="71afa-159">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-159">'Identity'</span></span>
- <span data-ttu-id="71afa-160">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-160">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-161">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-161">'Razor'</span></span>
- <span data-ttu-id="71afa-162">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-162">'SignalR' uid:</span></span> 

<span data-ttu-id="71afa-163">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-163">---- | --- title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-164">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-164">'Blazor'</span></span>
- <span data-ttu-id="71afa-165">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-165">'Identity'</span></span>
- <span data-ttu-id="71afa-166">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-166">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-167">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-167">'Razor'</span></span>
- <span data-ttu-id="71afa-168">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-168">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-169">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-169">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-170">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-170">'Blazor'</span></span>
- <span data-ttu-id="71afa-171">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-171">'Identity'</span></span>
- <span data-ttu-id="71afa-172">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-172">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-173">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-173">'Razor'</span></span>
- <span data-ttu-id="71afa-174">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-174">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-175">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-175">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-176">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-176">'Blazor'</span></span>
- <span data-ttu-id="71afa-177">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-177">'Identity'</span></span>
- <span data-ttu-id="71afa-178">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-178">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-179">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-179">'Razor'</span></span>
- <span data-ttu-id="71afa-180">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-180">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-181">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-181">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-182">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-182">'Blazor'</span></span>
- <span data-ttu-id="71afa-183">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-183">'Identity'</span></span>
- <span data-ttu-id="71afa-184">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-184">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-185">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-185">'Razor'</span></span>
- <span data-ttu-id="71afa-186">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-186">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-187">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-187">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-188">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-188">'Blazor'</span></span>
- <span data-ttu-id="71afa-189">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-189">'Identity'</span></span>
- <span data-ttu-id="71afa-190">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-190">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-191">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-191">'Razor'</span></span>
- <span data-ttu-id="71afa-192">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-192">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-193">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-193">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-194">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-194">'Blazor'</span></span>
- <span data-ttu-id="71afa-195">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-195">'Identity'</span></span>
- <span data-ttu-id="71afa-196">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-196">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-197">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-197">'Razor'</span></span>
- <span data-ttu-id="71afa-198">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-198">'SignalR' uid:</span></span> 

-
<span data-ttu-id="71afa-199">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span><span class="sxs-lookup"><span data-stu-id="71afa-199">title: author: description: monikerRange: ms.author: ms.custom: ms.date: no-loc:</span></span>
- <span data-ttu-id="71afa-200">"Blazor"</span><span class="sxs-lookup"><span data-stu-id="71afa-200">'Blazor'</span></span>
- <span data-ttu-id="71afa-201">"Identity"</span><span class="sxs-lookup"><span data-stu-id="71afa-201">'Identity'</span></span>
- <span data-ttu-id="71afa-202">"Let's Encrypt"</span><span class="sxs-lookup"><span data-stu-id="71afa-202">'Let's Encrypt'</span></span>
- <span data-ttu-id="71afa-203">"Razor"</span><span class="sxs-lookup"><span data-stu-id="71afa-203">'Razor'</span></span>
- <span data-ttu-id="71afa-204">'SignalR' uid:</span><span class="sxs-lookup"><span data-stu-id="71afa-204">'SignalR' uid:</span></span> 

<span data-ttu-id="71afa-205">---------- | | Autenticación | Protección de datos (consulte <xref:security/data-protection/configuration/overview>).</span><span class="sxs-lookup"><span data-stu-id="71afa-205">---------- | | Authentication | Data Protection (see <xref:security/data-protection/configuration/overview>).</span></span><br><br><span data-ttu-id="71afa-206">Para obtener más información, vea <xref:security/authentication/cookie> y <xref:security/cookie-sharing>.</span><span class="sxs-lookup"><span data-stu-id="71afa-206">For more information, see <xref:security/authentication/cookie> and <xref:security/cookie-sharing>.</span></span> <span data-ttu-id="71afa-207">| | Identity | Autenticación y configuración de base de datos.</span><span class="sxs-lookup"><span data-stu-id="71afa-207">| | Identity | Authentication and database configuration.</span></span><br><br><span data-ttu-id="71afa-208">Para obtener más información, vea <xref:security/authentication/identity>.</span><span class="sxs-lookup"><span data-stu-id="71afa-208">For more information, see <xref:security/authentication/identity>.</span></span> <span data-ttu-id="71afa-209">| | Sesión | Protección de datos (cookies cifradas) (consulte <xref:security/data-protection/configuration/overview>) y almacenamiento en caché (consulte <xref:performance/caching/distributed>).</span><span class="sxs-lookup"><span data-stu-id="71afa-209">| | Session | Data Protection (encrypted cookies) (see <xref:security/data-protection/configuration/overview>) and Caching (see <xref:performance/caching/distributed>).</span></span><br><br><span data-ttu-id="71afa-210">Para obtener más información, consulte [Administración del estado y la sesión: Estado de la sesión](xref:fundamentals/app-state#session-state).</span><span class="sxs-lookup"><span data-stu-id="71afa-210">For more information, see [Session and state management: Session state](xref:fundamentals/app-state#session-state).</span></span> <span data-ttu-id="71afa-211">| | TempData | Protección de datos (cookies cifradas; consulte <xref:security/data-protection/configuration/overview>) o sesión (consulte [Administración del estado y la sesión: Estado de la sesión](xref:fundamentals/app-state#session-state)).</span><span class="sxs-lookup"><span data-stu-id="71afa-211">| | TempData | Data Protection (encrypted cookies) (see <xref:security/data-protection/configuration/overview>) or Session (see [Session and state management: Session state](xref:fundamentals/app-state#session-state)).</span></span><br><br><span data-ttu-id="71afa-212">Para obtener más información, consulte [Administración del estado y la sesión: TempData](xref:fundamentals/app-state#tempdata).</span><span class="sxs-lookup"><span data-stu-id="71afa-212">For more information, see [Session and state management: TempData](xref:fundamentals/app-state#tempdata).</span></span> <span data-ttu-id="71afa-213">| | Antifalsificación | Protección de datos (consulte <xref:security/data-protection/configuration/overview>).</span><span class="sxs-lookup"><span data-stu-id="71afa-213">| | Anti-forgery | Data Protection (see <xref:security/data-protection/configuration/overview>).</span></span><br><br><span data-ttu-id="71afa-214">Para obtener más información, vea <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="71afa-214">For more information, see <xref:security/anti-request-forgery>.</span></span> |

## <a name="troubleshoot"></a><span data-ttu-id="71afa-215">Solucionar problemas</span><span class="sxs-lookup"><span data-stu-id="71afa-215">Troubleshoot</span></span>

### <a name="data-protection-and-caching"></a><span data-ttu-id="71afa-216">Protección y almacenamiento en caché de datos</span><span class="sxs-lookup"><span data-stu-id="71afa-216">Data Protection and caching</span></span>

<span data-ttu-id="71afa-217">Cuando la protección de datos o el almacenamiento en caché no están configurados para un entorno de granja de servidores web, se producen errores intermitentes cuando se procesan las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="71afa-217">When Data Protection or caching isn't configured for a web farm environment, intermittent errors occur when requests are processed.</span></span> <span data-ttu-id="71afa-218">Esto ocurre porque los nodos no comparten los mismos recursos y las solicitudes de usuario no se enrutan siempre de vuelta al mismo nodo.</span><span class="sxs-lookup"><span data-stu-id="71afa-218">This occurs because nodes don't share the same resources and user requests aren't always routed back to the same node.</span></span>

<span data-ttu-id="71afa-219">Piense en un usuario que inicia sesión en la aplicación a través de la autenticación de cookies.</span><span class="sxs-lookup"><span data-stu-id="71afa-219">Consider a user who signs into the app using cookie authentication.</span></span> <span data-ttu-id="71afa-220">El usuario inicia sesión en la aplicación en un nodo de la granja de servidores web.</span><span class="sxs-lookup"><span data-stu-id="71afa-220">The user signs into the app on one web farm node.</span></span> <span data-ttu-id="71afa-221">Si la solicitud siguiente llega al mismo nodo en el que iniciaron sesión, la aplicación puede descifrar la cookie de autenticación y permite el acceso al recurso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="71afa-221">If their next request arrives at the same node where they signed in, the app is able to decrypt the authentication cookie and allows access to the app's resource.</span></span> <span data-ttu-id="71afa-222">Si la solicitud siguiente llega a otro nodo, la aplicación no puede descifra la cookie de autenticación desde el nodo donde el usuario inició sesión y se produce un error en la autorización del recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="71afa-222">If their next request arrives at a different node, the app can't decrypt the authentication cookie from the node where the user signed in, and authorization for the requested resource fails.</span></span>

<span data-ttu-id="71afa-223">Cuando cualquiera de los síntomas siguientes se producen de manera **intermitente**, se suele hacer un seguimiento del problema hasta la configuración inadecuada de la protección de datos o del almacenamiento en caché para un entorno de granja de servidores web:</span><span class="sxs-lookup"><span data-stu-id="71afa-223">When any of the following symptoms occur **intermittently**, the problem is usually traced to improper Data Protection or caching configuration for a web farm environment:</span></span>

* <span data-ttu-id="71afa-224">La autenticación se interrumpe: La cookie de autenticación está configurada de manera incorrecta o no se puede descifrar.</span><span class="sxs-lookup"><span data-stu-id="71afa-224">Authentication breaks: The authentication cookie is misconfigured or can't be decrypted.</span></span> <span data-ttu-id="71afa-225">Los inicios de sesión de OAuth (Facebook, Microsoft, Twitter) o de OpenIdConnect presentan el error "Correlation failed" (Error de correlación).</span><span class="sxs-lookup"><span data-stu-id="71afa-225">OAuth (Facebook, Microsoft, Twitter) or OpenIdConnect logins fail with the error "Correlation failed."</span></span>
* <span data-ttu-id="71afa-226">La autorización se interrumpe: Identity se pierde.</span><span class="sxs-lookup"><span data-stu-id="71afa-226">Authorization breaks: Identity is lost.</span></span>
* <span data-ttu-id="71afa-227">El estado de sesión pierde datos.</span><span class="sxs-lookup"><span data-stu-id="71afa-227">Session state loses data.</span></span>
* <span data-ttu-id="71afa-228">Los elementos en caché desaparecen.</span><span class="sxs-lookup"><span data-stu-id="71afa-228">Cached items disappear.</span></span>
* <span data-ttu-id="71afa-229">Error de TempData.</span><span class="sxs-lookup"><span data-stu-id="71afa-229">TempData fails.</span></span>
* <span data-ttu-id="71afa-230">Error de POST: error en la comprobación antifalsificación.</span><span class="sxs-lookup"><span data-stu-id="71afa-230">POSTs fail: The anti-forgery check fails.</span></span>

<span data-ttu-id="71afa-231">Para más información sobre la configuración de la protección de datos para las implementaciones de granjas de servidores web, consulte <xref:security/data-protection/configuration/overview>.</span><span class="sxs-lookup"><span data-stu-id="71afa-231">For more information on Data Protection configuration for web farm deployments, see <xref:security/data-protection/configuration/overview>.</span></span> <span data-ttu-id="71afa-232">Para más información sobre la configuración del almacenamiento en caché para las implementaciones de granja de servidores web, consulte <xref:performance/caching/distributed>.</span><span class="sxs-lookup"><span data-stu-id="71afa-232">For more information on caching configuration for web farm deployments, see <xref:performance/caching/distributed>.</span></span>

## <a name="obtain-data-from-apps"></a><span data-ttu-id="71afa-233">Obtención de datos de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="71afa-233">Obtain data from apps</span></span>

<span data-ttu-id="71afa-234">Si las aplicaciones de la granja de servidores web son capaces de responder a solicitudes, obtenga solicitudes, conexiones y datos adicionales de las aplicaciones mediante el middleware en línea del terminal.</span><span class="sxs-lookup"><span data-stu-id="71afa-234">If the web farm apps are capable of responding to requests, obtain request, connection, and additional data from the apps using terminal inline middleware.</span></span> <span data-ttu-id="71afa-235">Para obtener más información y un código de ejemplo, vea <xref:test/troubleshoot#obtain-data-from-an-app>.</span><span class="sxs-lookup"><span data-stu-id="71afa-235">For more information and sample code, see <xref:test/troubleshoot#obtain-data-from-an-app>.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="71afa-236">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="71afa-236">Additional resources</span></span>

* <span data-ttu-id="71afa-237">[Extensión de script personalizada para Windows](/azure/virtual-machines/extensions/custom-script-windows): descarga y ejecuta scripts en máquinas virtuales de Azure, lo que resulta útil para la configuración posterior a la implementación y la instalación de software.</span><span class="sxs-lookup"><span data-stu-id="71afa-237">[Custom Script Extension for Windows](/azure/virtual-machines/extensions/custom-script-windows): Downloads and executes scripts on Azure virtual machines, which is useful for post-deployment configuration and software installation.</span></span>
* <xref:host-and-deploy/proxy-load-balancer>
 